(window.webpackJsonp=window.webpackJsonp||[]).push([["position-widget"],{CWem:function(e,t,o){"use strict";o.r(t);var n=o("mrSG"),s=o("q1tI"),i=o("i8i4"),l=o("AVTG"),r=o("WXjp"),u=o("oykh"),a=o("k/ZQ"),c=o("twDL"),d=o("en3B"),p=o("/qCs"),m=o("Rxoo");function b(e){return s.createElement("div",{className:m.positionInfo},s.createElement("div",{className:m.title},e.title),s.createElement(p.a,{textOutputs:e.textOutputs,disabled:!1,rightAlignedValues:!0}))}var h=function(e){function t(t){var o=e.call(this,t)||this;return o._updateTextOutputs=function(e){o.setState({textOutputs:e})},o.state={title:t.model.title(),textOutputs:t.model.textOutputs().value()},o}return Object(n.__extends)(t,e),t.prototype.componentDidMount=function(){this._subscribeToModel(this.props.model)},t.prototype.componentWillUnmount=function(){this._unsubscribeFromModel(this.props.model)},t.prototype.render=function(){return s.createElement(b,{title:this.state.title,textOutputs:this.state.textOutputs})},t.prototype._subscribeToModel=function(e){e.textOutputs().subscribe(this._updateTextOutputs)},t.prototype._unsubscribeFromModel=function(e){e.textOutputs().unsubscribe(this._updateTextOutputs)},t}(s.PureComponent),f=o("NbG7"),_=o("/3z9"),v=o("YSy0"),g=o("+Kd2"),k=function(e){function t(t){var o=e.call(this,t)||this;return o._block=null,o._setRef=function(e){o._block=e},o._onEnter=function(e){13===Object(_.hashFromEvent)(e)&&!1===o.props.model.disabled.value()&&o.props.model.doneButtonClick()},o._callback=function(){return o.forceUpdate()},o}return Object(n.__extends)(t,e),t.prototype.componentDidMount=function(){this._subscribeToModel(this.props.model),this.props.settings.subscribe(this._callback),null!==this._block&&void 0===this.props.focus&&this._block.focus()},t.prototype.componentWillUnmount=function(){this._unsubscribeFromModel(this.props.model),this.props.settings.unsubscribe(this._callback)},t.prototype.render=function(){var e=this.props.model,t=this.props.settings,o={value:t.value(),setValue:t.setValue.bind(t)},n=e.warning.value();return s.createElement(f.a.Provider,{value:o},s.createElement("div",{className:v.positionWidget,onKeyDown:this._onEnter,tabIndex:-1,ref:this._setRef},s.createElement("div",{className:v.header},s.createElement(u.a,{model:e.headerModel,supportBrackets:!0,currency:e.currency,mode:e.mode.value()})),s.createElement("div",{className:v.separator}),s.createElement("div",{className:v.brackets},s.createElement(a.a,{model:e,focus:this.props.focus})),Array.isArray(e.customFieldModels.value())&&e.customFieldModels.value().length>0&&s.createElement("div",{className:v.customFieldsWrapper},this._generateCustomFields(e)),n&&s.createElement("div",{className:v.warning},s.createElement("span",null,e.warning.value())),s.createElement("div",{className:v.button},s.createElement(c.a,{model:e})),e.mode.value()===d.g.Panel&&null!==e.positionInfoModel&&s.createElement("div",null,s.createElement("div",{className:v.separator}),s.createElement("div",{className:v.positionInfo},s.createElement(h,{model:e.positionInfoModel})))))},
t.prototype._subscribeToModel=function(e){this.props.model.disabled.subscribe(this._callback),this.props.model.loading.subscribe(this._callback),this.props.model.mode.subscribe(this._callback),this.props.model.warning.subscribe(this._callback)},t.prototype._unsubscribeFromModel=function(e){this.props.model.disabled.unsubscribe(this._callback),this.props.model.loading.unsubscribe(this._callback),this.props.model.mode.unsubscribe(this._callback),this.props.model.warning.unsubscribe(this._callback)},t.prototype._generateCustomFields=function(e){return Object(g.a)(e.customFieldModels.value(),!1,e.status,v.customField)},t}(s.PureComponent),y=o("ahhv"),C=function(e){function t(t){var o=e.call(this,t)||this;return o._onKeyDown=function(e){27===e.keyCode&&o.props.onClose&&o.props.onClose()},o}return Object(n.__extends)(t,e),t.prototype.render=function(){return s.createElement(r.a,{className:y.dialog,isOpened:this.props.isOpened,onKeyDown:this._onKeyDown,width:414},s.createElement(l.a,{className:y.dialogBody},this.props.model&&this.props.settings&&s.createElement(k,{settings:this.props.settings,model:this.props.model,key:this.props.model.id,focus:this.props.focus})))},t}(s.PureComponent),E=o("O51n"),O=function(e){function t(t){var o=e.call(this,t)||this;return o._onKeyDown=function(e){27===e.keyCode&&o.props.onCancel&&o.props.onCancel()},o}return Object(n.__extends)(t,e),t.prototype.render=function(){return s.createElement("div",{className:E.positionPanel,onKeyDown:this._onKeyDown},s.createElement(k,{settings:this.props.settings,model:this.props.model,focus:this.props.focus,key:this.props.model.id}))},t}(s.PureComponent);o.d(t,"showPositionDialog",(function(){return x})),o.d(t,"closePositionDialog",(function(){return w})),o.d(t,"mountPositionPanel",(function(){return B})),o.d(t,"unmountPositionPanel",(function(){return P}));var M=null;function x(e,t,o){w();var n={model:e,settings:t,isOpened:!0,focus:o,onClose:function(){w(),e.onDoneButtonClicked.reject(),n.model.headerModel.pinButtonClicked().unsubscribe(null,n.onClose),n.model.headerModel.closeButtonClicked().unsubscribe(null,n.onClose),M&&i.unmountComponentAtNode(M)}};I(n),n.model.headerModel.pinButtonClicked().subscribe(null,n.onClose),n.model.headerModel.closeButtonClicked().subscribe(null,n.onClose)}function w(){I({model:null,isOpened:!1})}function I(e){M||(M=document.createElement("div"),document.body.appendChild(M));var t=s.createElement(d.f.Provider,{value:{mode:e.model&&e.model.mode.value()||d.g.Panel,supportTrailingStop:Boolean(e.model&&e.model.supportTrailingStop)}},s.createElement(C,Object(n.__assign)({},e)));i.render(t,M)}function B(e,t,o,l){P(e,o);var r={model:e,settings:t,focus:l,onClose:function(){P(e,o),r.model.headerModel.pinButtonClicked().unsubscribe(null,r.onClose),r.model.headerModel.closeButtonClicked().unsubscribe(null,r.onClose)},onCancel:function(){r.model.headerModel&&r.model.headerModel.back()}};r.model.headerModel.pinButtonClicked().subscribe(null,r.onClose),r.model.headerModel.closeButtonClicked().subscribe(null,r.onClose),function(e,t){
var o=s.createElement(d.f.Provider,{value:{mode:e.model.mode.value(),supportTrailingStop:Boolean(e.model.supportTrailingStop)}},s.createElement(O,Object(n.__assign)({},e)));i.render(o,t)}(r,o)}function P(e,t){i.unmountComponentAtNode(t)}},O51n:function(e,t,o){e.exports={positionPanel:"positionPanel-12DncXAH"}},Rxoo:function(e,t,o){e.exports={positionInfo:"positionInfo-2HEB0yNn",title:"title-3OZQofSS",positionInfoItem:"positionInfoItem-1EqTxo7K",positionInfoItemTitle:"positionInfoItemTitle-F5LObE2P",positionInfoItemValue:"positionInfoItemValue-2fo8LrS9"}},YSy0:function(e,t,o){e.exports={positionWidget:"positionWidget-2Q-5afqb",header:"header-iozH_guT",separator:"separator-2uOOvXMD",brackets:"brackets-3Jjz-xyg",button:"button-333f-9CQ",positionInfo:"positionInfo-3OWjL0ry",warning:"warning-3MmJ_lV5",customFieldsWrapper:"customFieldsWrapper-16pUBfif"}},ahhv:function(e,t,o){e.exports={dialog:"dialog-22_qS41k",dialogBody:"dialogBody-3yOSlfYA"}}}]);