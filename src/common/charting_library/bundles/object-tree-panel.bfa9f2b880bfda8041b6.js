(window.webpackJsonp=window.webpackJsonp||[]).push([["object-tree-panel"],{"20cQ":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M11.5 4A2.5 2.5 0 0 0 7 5.5V7h6a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2V5.5a3.5 3.5 0 0 1 6.231-2.19c-.231.19-.73.69-.73.69zM13 8H6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1zm-2 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>'},"B6/a":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M5.5 6C4.67 6 4 6.67 4 7.5V20.5c0 .83.67 1.5 1.5 1.5H16v-1H5.5a.5.5 0 0 1-.5-.5V12h16v1h1V9.5c0-.83-.67-1.5-1.5-1.5h-8.8L9.86 6.15 9.71 6H5.5zM21 11H5V7.5c0-.28.22-.5.5-.5h3.8l1.85 1.85.14.15h9.21c.28 0 .5.22.5.5V11zm1 11v-3h3v-1h-3v-3h-1v3h-3v1h3v3h1z"/></svg>'},EvtC:function(e,t,n){e.exports={button:"button-2-lC3gh4"}},NhaM:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M5.5 11.5v8a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-8m-17 0v-4a1 1 0 0 1 1-1h4l2 2h9a1 1 0 0 1 1 1v2m-17 0h17"/></svg>'},"U+QY":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M14.692 3.012l-12 12.277.715.699 12-12.277-.715-.699zM9.05 15.627a7.042 7.042 0 0 1-3.144-.741l.742-.76c.72.311 1.52.5 2.402.5 2.297 0 4.047-1.29 5.25-2.645a12.168 12.168 0 0 0 1.687-2.466l.007-.015-.007-.015A12.166 12.166 0 0 0 14.3 7.019c-.11-.124-.225-.247-.344-.37l.699-.715c.137.14.268.28.392.42a13.16 13.16 0 0 1 1.83 2.678 8.117 8.117 0 0 1 .119.243l.006.015.003.005v.001l-.456.204.456.203v.002l-.003.005-.006.015-.025.052a11.762 11.762 0 0 1-.461.857 13.158 13.158 0 0 1-1.463 2.011c-1.296 1.46-3.296 2.982-5.998 2.982zm7.5-6.127l.456-.203.09.203-.09.203-.456-.203zm-7.5 3.07c-.27 0-.53-.037-.778-.105l.879-.899c.999-.052 1.833-.872 1.895-1.938l.902-.923c.066.253.102.52.102.795 0 1.695-1.344 3.07-3 3.07zM6.15 10.294l.902-.923c.063-1.066.896-1.886 1.895-1.938l.879-.9a2.94 2.94 0 0 0-.777-.103c-1.657 0-3 1.374-3 3.069 0 .275.035.541.101.795zM9.05 4.373c.88 0 1.68.19 2.4.5l.743-.759a7.043 7.043 0 0 0-3.143-.74c-2.703 0-4.703 1.521-6 2.98a13.159 13.159 0 0 0-1.83 2.678 7.886 7.886 0 0 0-.118.243l-.007.015-.002.005v.001l.456.204-.457-.203-.09.203.09.203.457-.203-.456.203v.002l.002.005.007.015a4.5 4.5 0 0 0 .119.243 13.152 13.152 0 0 0 1.83 2.677c.124.14.255.28.392.42l.7-.715c-.12-.122-.235-.245-.345-.369a12.156 12.156 0 0 1-1.686-2.466L2.105 9.5l.007-.015a12.158 12.158 0 0 1 1.686-2.466C5.002 5.665 6.752 4.373 9.05 4.373z"/></svg>'},Vbka:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M4.5 12.5l4.59-4.59a2 2 0 0 1 2.83 0l3.17 3.17a2 2 0 0 0 2.83 0L22.5 6.5m-8 9.5v5.5M12 19l2.5 2.5L17 19m4.5 3v-5.5M19 19l2.5-2.5L24 19"/></svg>'},Z3xJ:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M21.106 12.5H6.894a.5.5 0 0 1-.318-.886L14 5.5l7.424 6.114a.5.5 0 0 1-.318.886zM21.106 16.5H6.894a.5.5 0 0 0-.318.886L14 23.5l7.424-6.114a.5.5 0 0 0-.318-.886z"/></svg>'},bQ7Y:function(e,t,n){e.exports={button:"button-2ioYhFEY",hover:"hover-yHQNmTbI",isInteractive:"isInteractive-20uLObIc",isGrouped:"isGrouped-2BBXQnbO",isActive:"isActive-22S-lGpa",isOpened:"isOpened-p-Ume5l9",isDisabled:"isDisabled-1_tmrLfP",text:"text-1sK7vbvh",icon:"icon-beK_KS0k"}},dDxv:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" d="M5.5 16.5l4.586-4.586a2 2 0 0 1 2.828 0l3.172 3.172a2 2 0 0 0 2.828 0L23.5 10.5"/></svg>'},ffaL:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M4.605 14.089A10.052 10.052 0 0 1 4.56 14l.046-.089a17.18 17.18 0 0 1 2.329-3.327C8.58 8.758 10.954 7 14 7c3.046 0 5.421 1.757 7.066 3.585A17.18 17.18 0 0 1 23.44 14l-.046.089a17.18 17.18 0 0 1-2.329 3.327C19.42 19.242 17.046 21 14 21c-3.046 0-5.421-1.757-7.066-3.584a17.18 17.18 0 0 1-2.329-3.327zm19.848-.3L24 14l.453.212-.001.002-.003.005-.009.02a16.32 16.32 0 0 1-.662 1.195c-.44.72-1.1 1.684-1.969 2.65C20.08 20.008 17.454 22 14 22c-3.454 0-6.079-1.993-7.81-3.916a18.185 18.185 0 0 1-2.469-3.528 10.636 10.636 0 0 1-.161-.318l-.01-.019-.002-.005v-.002L4 14a55.06 55.06 0 0 1-.453-.212l.001-.002.003-.005.009-.02.033-.067a16.293 16.293 0 0 1 .629-1.126c.44-.723 1.1-1.686 1.969-2.652C7.92 7.993 10.546 6 14 6c3.454 0 6.079 1.993 7.81 3.916a18.183 18.183 0 0 1 2.469 3.528 10.588 10.588 0 0 1 .161.318l.01.019.002.005v.002zM24 14l.453-.211.099.211-.099.211L24 14zm-20.453-.211L4 14l-.453.211L3.448 14l.099-.211zM11 14a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-4a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm0 5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>'},gSe6:function(e,t,n){e.exports={wrap:"wrap-2hFTn3uj",dialog:"dialog-30rnMlqd",offset:"offset-1ZdjMRaL",title:"title-h3xhDe9n",main:"main-3NNVXu0y",disabled:"disabled-1B-swnz-",icon:"icon-3QTtVlxj",textIcon:"textIcon-1P4CGe09",rightButtons:"rightButtons-34BFYJK5",twoButtons:"twoButtons-l6yMC-Ly",button:"button-qnKquaRk",viewButton:"viewButton-2k7APQOE",threeButtons:"threeButtons-2ZMUW8cB",lockButton:"lockButton-175WWGi7",removeButton:"removeButton-qjvCYfQg",warn:"warn-148TrkU0",hover:"hover-v-sC468U",expandHandle:"expandHandle-1GeKFJz2",selected:"selected-riBJw2JS",childOfSelected:"childOfSelected-3yG2bS0f",renameInput:"renameInput-JFXfBA1C"}},gla1:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("q1tI"),r=function(){
return Object(o.useReducer)((function(e,t){return e+1}),0)[1]}},h5pj:function(e,t,n){e.exports={wrap:"wrap-2B3z65_v",space:"space-1A2qtG9Q",tree:"tree-P2Fxhbml"}},"jaf/":function(e,t,n){"use strict";n.r(t);var o=n("mrSG"),r=n("Eyy1"),i=n("aIyQ"),c=n.n(i);function u(e){return e}var s=n("QrSB"),a=function(){function e(e){var t=this;this._onChange=new c.a,this._recalculate=function(){var e=t._groupModel.groups().map((function(e){return e.id})),n=t._selectionApi.allSources();t._selected=t._selected.filter((function(t){return e.includes(t)||n.includes(t)})),t._onChange.fire(t._selected)},this._model=e,this._selectionApi=new s.SelectionApi(this._model),this._groupModel=this._model.lineToolsGroupModel(),this._selected=this._getSelectedIds(),this._selectionApi.onChanged().subscribe(this,(function(){t._selected=t._getSelectedIds(),t._onChange.fire(t._selected)})),this._groupModel.onChanged().subscribe(this,this._recalculate)}return e.prototype.destroy=function(){this._selectionApi.onChanged().unsubscribeAll(this),this._groupModel.onChanged().unsubscribeAll(this)},e.prototype.set=function(e){for(var t=[],n=e.map((function(e){return e.id()})),o=function(e){var o=e.children(),r=new Set(o.map((function(e){return e.id()})));e.hasChildren()?(t.push.apply(t,Array.from(r.values()).map(u)),n=n.filter((function(e){return!r.has(e)}))):t.push(e.id())},r=0,i=e;r<i.length;r++){o(i[r])}this._selectionApi.set(t),this._selected=n,this._onChange.fire(this._selected)},e.prototype.canBeAddedToSelection=function(e){return null!==e&&e.canBeAddedToSelection()},e.prototype.onChange=function(){return this._onChange},e.prototype.selected=function(){return this._selected},e.prototype._getSelectedIds=function(){var e=this;return this._selectionApi.allSources().filter((function(t){var n=e._model.dataSourceForId(t);return null!==n&&n.showInObjectTree()}))},e}(),l=n("YFKU"),d=n("nP+q"),h=n("CW80"),p=n("3ClC"),f=n("ihdJ"),b=n("fgLi"),v=n("HZKX"),_=n("Vbka"),g=n("dDxv"),m=n("NhaM"),y=Object(l.t)("Show {sourceTitle}"),S=Object(l.t)("Hide {sourceTitle}"),O=Object(l.t)("Lock {sourceTitle}"),j=Object(l.t)("Unlock {sourceTitle}"),C=Object(l.t)("Change {sourceType} title to {newSourceTitle}");function w(e,t){return t.every((function(t){return!(t.pane()!==e&&!t.allowsMovingbetweenPanes())}))}function T(e){return e instanceof b.DataSource&&e.showInObjectTree()?e.id():null}var I=new c.a,M=function(){function e(e,t){this._undoModel=e,this._dataSource=t}return e.prototype.destroy=function(){},e.prototype.id=function(){return this._dataSource.id()},e.prototype.title=function(){return Object(h.isLineTool)(this._dataSource)?this._dataSource.properties().title.value()||this._dataSource.translatedType():this._dataSource.title()},e.prototype.gaLabel=function(){return Object(p.isStudy)(this._dataSource)?"Study":Object(h.isLineTool)(this._dataSource)?"Drawing":"Symbol"},e.prototype.canBeLocked=function(){return Object(h.isLineTool)(this._dataSource)&&this._dataSource.userEditEnabled()},e.prototype.canBeRemoved=function(){
return this._undoModel.mainSeries()!==this._dataSource&&this._dataSource.isUserDeletable()},e.prototype.canBeHidden=function(){return this._dataSource.canBeHidden()},e.prototype.canBeRenamed=function(){return Object(h.isLineTool)(this._dataSource)},e.prototype.isVisible=function(){return this._dataSource.properties().visible.value()},e.prototype.isActualInterval=function(){return!Object(h.isLineTool)(this._dataSource)||this._dataSource.isActualInterval()},e.prototype.onIsActualIntervalChange=function(){return Object(h.isLineTool)(this._dataSource)?this._dataSource.onIsActualIntervalChange():I},e.prototype.isLocked=function(){return!!Object(h.isLineTool)(this._dataSource)&&this._dataSource.properties().frozen.value()},e.prototype.onVisibilityChanged=function(){return this._dataSource.properties().visible.listeners()},e.prototype.onLockChanged=function(){return Object(h.isLineTool)(this._dataSource)?this._dataSource.properties().frozen.listeners():I},e.prototype.getIcon=function(){var e=Object(f.a)(),t=this._dataSource.getSourceIcon(),n=Object(p.isStudyStrategy)(this._dataSource),o={type:d.a.Svg,content:n?_:g};if(e&&t)if("loadSvg"===t.type){var r=t.svgId.split("."),i=r[0],c=r[1],u="linetool"===i?e.linetool[c]:e.series[Number(c)];o={type:d.a.Svg,content:u||g}}else"text"===t.type&&(o={type:d.a.Text,content:t.text});return o},e.prototype.setVisible=function(e){var t=(e?y:S).format({sourceTitle:this._dataSource.title()});this._undoModel.setProperty(this._dataSource.properties().visible,e,t)},e.prototype.setLocked=function(e){if(Object(h.isLineTool)(this._dataSource)){var t=(e?O:j).format({sourceTitle:this._dataSource.title()});this._undoModel.setProperty(this._dataSource.properties().frozen,e,t)}},e.prototype.setName=function(e){if(Object(h.isLineTool)(this._dataSource)){var t=C.format({sourceType:this._dataSource.translatedType(),newSourceTitle:e});this._undoModel.setProperty(this._dataSource.properties().title,e,t)}},e.prototype.isCopiable=function(){return this._dataSource.copiable()},e.prototype.isClonable=function(){return this._dataSource.cloneable()},e.prototype.zOrder=function(){return this._dataSource.zorder()},e.prototype.remove=function(){this._undoModel.removeSource(this._dataSource,!1)},e.prototype.canBeAddedToSelection=function(){return this._undoModel.selection().canBeAddedToSelection(this._dataSource)},e.prototype.setAsSelection=function(){var e=this;this._undoModel.model().selectionMacro((function(t){t.clearSelection(),t.addSourceToSelection(e._dataSource)}))},e.prototype.addToSelection=function(){var e=this;this._undoModel.model().selectionMacro((function(t){t.addSourceToSelection(e._dataSource)}))},e.prototype.addSourcesToArray=function(e){return e.push(this._dataSource),e},e.prototype.insertSourcesBeforeThis=function(e){var t=this;this._insertSources(e,(function(e){return t._undoModel.insertBefore(e,t._dataSource)}))},e.prototype.insertSourcesAfterThis=function(e){var t=this;this._insertSources(e,(function(e){return t._undoModel.insertAfter(e,t._dataSource)}))},e.prototype.children=function(){return[]},
e.prototype.hasChildren=function(){return!1},e.prototype.pane=function(){return Object(r.ensureNotNull)(this._undoModel.model().paneForSource(this._dataSource))},e.prototype.allowsMovingbetweenPanes=function(){return!Object(h.isLineTool)(this._dataSource)},e.prototype.canBeAddedToGroup=function(){return Object(h.isLineTool)(this._dataSource)},e.prototype.canInsertBeforeThis=function(e){return this._canInsertBeforeOrAfter(e)},e.prototype.canInsertAfterThis=function(e){return this._canInsertBeforeOrAfter(e)},e.prototype.detachFromParent=function(){if(Object(h.isLineTool)(this._dataSource)){var e=this._undoModel.model(),t=this._undoModel.lineToolsGroupController(),n=e.lineToolsGroupModel().groupForLineTool(this._dataSource);null!==n&&t.excludeLineToolFromGroup(n,this._dataSource)}},e.prototype.onTitleChanged=function(){var e=this._dataSource.properties().title;return e?e.listeners():void 0},e.prototype._canInsertBeforeOrAfter=function(e){var t=this._undoModel.model();if(!w(this.pane(),e))return!1;if(Object(h.isLineTool)(this._dataSource)&&(null!==t.lineToolsGroupModel().groupForLineTool(this._dataSource)&&e.some((function(e){return!e.canBeAddedToGroup()}))))return!1;return!0},e.prototype._insertSources=function(e,t){var n=this._undoModel.model(),o=this._undoModel.lineToolsGroupController();this._undoModel.beginUndoMacro("Insert source(s) after");var i=function(){e.forEach((function(e){return e.detachFromParent()}))},c=e.reduce((function(e,t){return t.addSourcesToArray(e)}),[]);if(Object(h.isLineTool)(this._dataSource)){var u=n.lineToolsGroupModel().groupForLineTool(this._dataSource);null!==u?(Object(r.assert)(!e.some((function(e){return e.hasChildren()}))),c.forEach((function(e){Object(h.isLineTool)(e)&&(u.containsLineTool(e)||o.addLineToolToGroup(u,e))}))):i()}else i();t(c),this._undoModel.endUndoMacro()},e}(),A=function(){function e(e,t){var n=this;this._onTitleChanged=new c.a,this._onVisibilityChanged=new c.a,this._onLockChanged=new c.a,this._onIsActualIntervalChanged=new c.a,this._undoModel=e,this._group=t,this._lineTools=t.lineTools();var o=function(){n._lineTools.forEach((function(e){e.properties().visible.listeners().subscribe(n,(function(){return n._onVisibilityChanged.fire()})),e.properties().frozen.listeners().subscribe(n,(function(){return n._onLockChanged.fire()})),e.onIsActualIntervalChange().subscribe(n,(function(){return n._onIsActualIntervalChanged.fire()}))}))};this._group.onChanged().subscribe(this,(function(e){n._unsubscribeFromAllLineTools(),n._lineTools=n._group.lineTools(),o(),e.lockedChanged&&n._onLockChanged.fire(),e.visibilityChanged&&n._onVisibilityChanged.fire(),e.titleChanged&&n._onTitleChanged.fire(),e.isActualIntervalChanged&&n._onIsActualIntervalChanged.fire()})),o()}return e.prototype.destroy=function(){this._unsubscribeFromAllLineTools(),this._group.onChanged().unsubscribeAll(this)},e.prototype.id=function(){return this._group.id},e.prototype.title=function(){return this._group.name()},e.prototype.gaLabel=function(){return"Group"},e.prototype.getIcon=function(){return{type:d.a.Svg,
content:m}},e.prototype.canBeRemoved=function(){return!0},e.prototype.canBeHidden=function(){return!0},e.prototype.canBeLocked=function(){return!0},e.prototype.canBeRenamed=function(){return!0},e.prototype.isVisible=function(){return"Invisible"!==this._group.visibility()},e.prototype.isActualInterval=function(){return this._group.lineTools().some((function(e){return e.isActualInterval()}))},e.prototype.onIsActualIntervalChange=function(){return this._onIsActualIntervalChanged},e.prototype.isLocked=function(){return"Locked"===this._group.locked()},e.prototype.onTitleChanged=function(){return this._onTitleChanged},e.prototype.onVisibilityChanged=function(){return this._onVisibilityChanged},e.prototype.onLockChanged=function(){return this._onLockChanged},e.prototype.setVisible=function(e){this._undoModel.lineToolsGroupController().setGroupVisibility(this._group,e)},e.prototype.setLocked=function(e){this._undoModel.lineToolsGroupController().setGroupLock(this._group,e)},e.prototype.setName=function(e){this._undoModel.lineToolsGroupController().setGroupName(this._group,e)},e.prototype.isCopiable=function(){return!1},e.prototype.isClonable=function(){return!1},e.prototype.zOrder=function(){return 0===this._group.lineTools().length?null:this._group.lineTools()[0].zorder()},e.prototype.remove=function(){this._undoModel.lineToolsGroupController().removeGroup(this._group)},e.prototype.canBeAddedToSelection=function(){var e=this._undoModel.model();return this._group.lineTools().every((function(t){return e.selection().canBeAddedToSelection(t)}))},e.prototype.setAsSelection=function(){var e=this;this._undoModel.model().selectionMacro((function(t){t.clearSelection(),e._group.lineTools().forEach((function(e){return t.addSourceToSelection(e)}))}))},e.prototype.addToSelection=function(){var e=this;this._undoModel.model().selectionMacro((function(t){e._group.lineTools().forEach((function(e){return t.addSourceToSelection(e)}))}))},e.prototype.addSourcesToArray=function(e){return e.push.apply(e,this._group.lineTools()),e},e.prototype.detachFromParent=function(){},e.prototype.insertSourcesBeforeThis=function(e){var t=this,n=this._insertBeforeTarget();this._insertSources(e,(function(e){return t._undoModel.insertBefore(e,n)}))},e.prototype.insertSourcesAfterThis=function(e){var t=this,n=this._insertAfterTarget();this._insertSources(e,(function(e){return t._undoModel.insertAfter(e,n)}))},e.prototype.children=function(){var e=this,t=Object(o.__spreadArrays)(this._group.lineTools());return t.sort((function(e,t){return t.zorder()-e.zorder()})),t.map((function(t){return new M(e._undoModel,t)}))},e.prototype.hasChildren=function(){return!0},e.prototype.pane=function(){return Object(r.ensureNotNull)(this._undoModel.model().paneForSource(this._group.lineTools()[0]))},e.prototype.allowsMovingbetweenPanes=function(){return!1},e.prototype.canBeAddedToGroup=function(){return!1},e.prototype.canInsertBeforeThis=function(e){return this._canInsertBeforeOrAfter(e)},e.prototype.canInsertAfterThis=function(e){return this._canInsertBeforeOrAfter(e)},
e.prototype._canInsertBeforeOrAfter=function(e){return w(this.pane(),e)},e.prototype._insertSources=function(e,t){this._undoModel.beginUndoMacro("Insert source(s) after");var n=e.reduce((function(e,t){return t.addSourcesToArray(e)}),[]);e.forEach((function(e){return e.detachFromParent()})),t(n),this._undoModel.endUndoMacro()},e.prototype._insertBeforeTarget=function(){return Object(r.ensureNotNull)(this._group.lineTools().reduce((function(e,t){return null===e?t:e.zorder()<t.zorder()?e:t}),null))},e.prototype._insertAfterTarget=function(){return Object(r.ensureNotNull)(this._group.lineTools().reduce((function(e,t){return null===e?t:e.zorder()>t.zorder()?e:t}),null))},e.prototype._unsubscribeFromAllLineTools=function(){var e=this;this._lineTools.forEach((function(t){t.properties().visible.listeners().unsubscribeAll(e),t.properties().frozen.listeners().unsubscribeAll(e),t.onIsActualIntervalChange().unsubscribeAll(e)}))},e}(),E=function(){function e(e){this._hoveredObjectChanged=new c.a,this._undoModel=e,this._undoModel.model().hoveredSourceChanged().subscribe(this,this._onModelHoveredSourceChanged)}return e.prototype.getObjectById=function(e){var t=this._undoModel.model(),n=t.dataSourceForId(e);if(null!==n)return new M(this._undoModel,n);var o=t.lineToolsGroupModel().groupForId(e);return null!==o?new A(this._undoModel,o):null},e.prototype.canBeGroupped=function(e){if(0===e.length||1===e.length&&e[0].hasChildren())return!1;var t=[];if(e.forEach((function(e){return e.addSourcesToArray(t)})),t.some((function(e){return!Object(h.isLineTool)(e)})))return!1;var n=this._undoModel.model(),o=t.map((function(e){return n.paneForSource(e)}));return new Set(o).size<2},e.prototype.contextMenuActions=function(e,t,n){var o=new v.ActionsProvider(e,n),r=[];return t.forEach((function(e){return e.addSourcesToArray(r)})),o.contextMenuActionsForSources(r)},e.prototype.insertBefore=function(e,t){t.insertSourcesAfterThis(e)},e.prototype.insertAfter=function(e,t){t.insertSourcesBeforeThis(e)},e.prototype.setHoveredObject=function(e){var t=this._undoModel.model();if(null!==e){var n=t.dataSourceForId(e);null!==n&&t.setHoveredSource(n,null)}else t.setHoveredSource(null,null)},e.prototype.hoveredObjectId=function(){return T(this._undoModel.model().hoveredSource())},e.prototype.hoveredObjectChanged=function(){return this._hoveredObjectChanged},e.prototype._onModelHoveredSourceChanged=function(e){this._hoveredObjectChanged.fire(T(e))},e}(),B=function(){function e(e){this._controller=e,this._facade=new E(e),this._groupModel=e.model().lineToolsGroupModel()}return e.prototype.buildTree=function(){for(var e={},t={},n=0,i=this._controller.model().panes();n<i.length;n++){var c=i[n],u=c.orderedSources().filter((function(e){return e.showInObjectTree()}));e[c.id()]=x(c.id(),0);for(var s=0,a=this._groupModel.groups();s<a.length;s++){var l=a[s],d=Object(r.ensureNotNull)(this._facade.getObjectById(l.id));if(d.pane()===c){t[d.id()]=d;var h=Object(o.__spreadArrays)(l.lineTools()).sort((function(e,t){return e.zorder()>t.zorder()?-1:1})).map((function(e){
return e.id()}));e[d.id()]=x(d.id(),1,c.id(),h),e[c.id()].children.push(d.id());for(var p=0,f=h;p<f.length;p++){var b=f[p];t[b]=Object(r.ensureNotNull)(this._facade.getObjectById(b)),e[b]=x(b,2,d.id())}}}for(var v=0,_=u;v<_.length;v++){var g=_[v];e[g.id()]||(e[g.id()]=x(g.id(),1,c.id()),e[c.id()].children.push(g.id()),t[g.id()]=Object(r.ensureNotNull)(this._facade.getObjectById(g.id())))}e[c.id()].children.sort((function(e,n){return Object(r.ensureNotNull)(t[e].zOrder())>Object(r.ensureNotNull)(t[n].zOrder())?-1:1}))}return{nodes:e,entities:t}},e}();function x(e,t,n,o){return void 0===o&&(o=[]),{id:e,level:t,parentId:n,children:o}}n("b5Gw");var N=n("nn46"),L=n("7ktv"),k=n("5VQP"),G=n("7KDR"),z=n("zRdu"),F=n("/3z9"),D=n("txPx"),V=n("fs3R"),P=n("qckB"),H=n("DYI2"),R=n("ffaL"),U=n("GjMU"),Q=n("PgQx"),K=n("B6/a");n.d(t,"logger",(function(){return q})),n.d(t,"ObjectTree",(function(){return Y}));var q=Object(D.getLogger)("Platform.GUI.ObjectTree");function J(e){return e instanceof L.PriceDataSource}var Y=function(){function e(e){var t=this;this._entitiesCache={},this._nodes={},this._onChange=new c.a,this._onGroupCreated=new c.a,this._subscriptions=[],this._removeSourcesPromise=null,this._timeout=null,this._objects=[],this._options={general:!0,mainSeries:!0,mainSeriesTrade:!0,esdStudies:!0,fundamentals:!0,studies:!0,lineTools:!0,publishedCharts:!0,ordersAndPositions:!0,alerts:!1,chartEvents:!0,objectTree:!1},this._getObjectsToModify=function(e){var n=t.selection().selected();return n.find((function(t){return t===e}))?n.map(t._ensuredEntity):[t._ensuredEntity(e)]},this._onActiveChartChanged=function(){t._cleanup(),t._init()},this._cleanup=function(){null!==t._timeout&&(clearTimeout(t._timeout),t._timeout=null),t._subscriptions.forEach((function(e){e.unsubscribeAll(t)})),t._selection.destroy(),t._chart.unsubscribe(t._onActiveChartChanged);for(var e=0,n=Object.values(t._entitiesCache);e<n.length;e++){n[e].destroy()}null!==t._removeSourcesPromise&&t._removeSourcesPromise.cancel()},this._init=function(){t._controller=t._chart.value().model(),t._groupController=t._controller.lineToolsGroupController(),t._model=t._controller.model(),t._groupModel=t._model.lineToolsGroupModel(),t._facade=new E(t._controller),t._subscriptions=[t._model.mainSeries().onStyleChanged(),t._model.mainSeries().dataEvents().symbolResolved(),t._model.mainSeries().onIntervalChanged(),t._model.panesCollectionChanged(),t._model.dataSourceCollectionChanged(),t._groupModel.onChanged()],t._subscriptions.forEach((function(e){e.subscribe(t,t._update)})),t._chart.subscribe(t._onActiveChartChanged),t._selection=new a(t._model),t._update()},this._update=function(){null===t._timeout&&(t._timeout=setTimeout((function(){t._recalculateTree(),t._onChange.fire(),t._timeout=null})))},this._ensuredEntity=function(e){return Object(r.ensureNotNull)(t._getEntityById(e))},this._chart=e,this._init()}return e.prototype.destroy=function(){this._cleanup()},e.prototype.getState=function(){return{nodes:Object.values(this._nodes),selection:this._selection.selected()}},
e.prototype.getChartId=function(){return this._chart.value().id()},e.prototype.insertSelection=function(e,t){var n=this._facade,o=this.selection().selected().map(this._ensuredEntity),r=this._normalizeTargetAndDropType(e,t),i=r[0],c=r[1];this._controller.withMacro(Object(l.t)("Move objects"),(function(){switch(c){case"before":n.insertBefore(o,i);break;case"after":n.insertAfter(o,i)}})),this._update()},e.prototype.entity=function(e){return this._entitiesCache[e]||null},e.prototype.isMain=function(e){return e.id()===this._controller.mainSeries().id()},e.prototype.selection=function(){return this._selection},e.prototype.setIsLocked=function(e,t){var n=this._getObjectsToModify(e),o=(t?Object(l.t)("Lock"):Object(l.t)("Unlock"))+" "+Object(l.t)("objects");this._controller.withMacro(o,(function(){for(var e=0,o=n;e<o.length;e++){o[e].setLocked(t)}})),Object(N.b)("Lock",Object(N.a)(n))},e.prototype.setIsVisible=function(e,t){var n=this._getObjectsToModify(e),o=(t?Object(l.t)("Show"):Object(l.t)("Hide"))+" "+Object(l.t)("objects");this._controller.withMacro(o,(function(){for(var e=0,o=n;e<o.length;e++){o[e].setVisible(t)}})),Object(N.b)("Hide",Object(N.a)(n))},e.prototype.remove=function(e){var t=this,n=this._getObjectsToModify(e);t._controller.withMacro(Object(l.t)("Remove objects"),(function(){for(var e=0,o=n;e<o.length;e++){var r=o[e];r.remove(),delete t._entitiesCache[r.id()]}})),Object(N.b)("Delete",Object(N.a)(n)),t._update()},e.prototype.canSelectionBeGrouped=function(){var e=this._getSelectedEntities();return this._facade.canBeGroupped(e)},e.prototype.createGroupFromSelection=function(){var e=this._groupController.createGroupFromSelection();Object(N.b)("Create Group"),this.selection().set([this._ensuredEntity(e.id)]),this._onGroupCreated.fire(e.id),this._update()},e.prototype.isSelectionDropable=function(e,t){var n=this.selection().selected().map(this._ensuredEntity),o=this._normalizeTargetAndDropType(e,t),r=o[0];switch(o[1]){case"after":return r.canInsertAfterThis(n);case"before":return r.canInsertBeforeThis(n)}},e.prototype.onChange=function(){return this._onChange},e.prototype.onGroupCreated=function(){return this._onGroupCreated},e.prototype.isSelectionCloneable=function(){var e=this._getSelectedEntities();return e.length>0&&e.every((function(e){return e.isClonable()}))},e.prototype.isSelectionCopiable=function(){var e=this._getSelectedEntities();return e.length>0&&e.every((function(e){return e.isCopiable()}))},e.prototype.openProperties=function(e){var t=this._model.dataSourceForId(e.id());this.selection().set([e]),null!==t&&(this._controller.mainSeries()===t?this._chart.value().showGeneralChartProperties():(Object(h.isLineTool)(t)||Object(p.isStudy)(t))&&this._chart.value().showChartPropertiesForSource(t))},e.prototype.canSelectionBeUnmerged=function(){var e=this._getSelectedEntities();return 1===e.length&&this.canNodeWithIdBeUnmerged(e[0].id())},e.prototype.canNodeWithIdBeUnmerged=function(e){var t=this._model.dataSourceForId(e);return null!==t&&J(t)&&this._model.isUnmergeAvailableForSource(t)},
e.prototype.unmergeSelectionUp=function(){this._unmergeSelection(0)},e.prototype.unmergeSelectionDown=function(){this._unmergeSelection(1)},e.prototype.copySelection=function(){var e=this,t=this._getSelectedEntities(),n=t.map((function(t){return Object(r.ensureNotNull)(e._model.dataSourceForId(t.id()))}));this._chart.value().onAppClipboardCopy(n),Object(N.b)("Copy",Object(N.a)(t))},e.prototype.cloneSelection=function(){var e=this,t=this._getSelectedEntities(),n=t.map((function(t){return Object(r.ensureNotNull)(e._model.dataSourceForId(t.id()))}));n.every(h.isLineTool)&&(this._controller.cloneLineTools(Object(o.__spreadArrays)(n),!1),Object(N.b)("Clone",Object(N.a)(t)))},e.prototype.rename=function(e,t){var n=this._getObjectsToModify(e.id());1===n.length&&n.some((function(e){return e.canBeRenamed()}))&&(t(),Object(N.b)("Rename",Object(N.a)(n)))},e.prototype.openContextMenu=function(e,t,n){return Object(o.__awaiter)(this,void 0,void 0,(function(){var r,i,c,u;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return this._objects=this._getObjectsToModify(e.id()),r=this._facade.canBeGroupped(this._objects),this._objects.some((function(e){return e.hasChildren()}))?(i=this._getActionsForGroupItem(e,t,r),[3,3]):[3,1];case 1:return[4,this._facade.contextMenuActions(this._chart.value(),this._objects,this._options)];case 2:c=o.sent(),i=Array.from(c).filter((function(e,t,n){return e.type!==z.a.Separator||!n[t+1]||n[t+1].type!==z.a.Separator})),1===this._objects.length&&this._objects[0].canBeRenamed()&&(u=i.findIndex((function(e){return"Copy"===e.id})),i.splice(-1===u?i.length:u+1,0,this._getRenameAction(t))),r&&(u=i.findIndex((function(e){return"Clone"===e.id})),i.splice(-1===u?0:u,0,this._getGroupAction())),o.label=3;case 3:return i.length>0&&k.ContextMenuManager.createMenu(i).then((function(e){return e.show(n)})),[2]}}))}))},e.prototype.setHoveredObject=function(e){this._facade.setHoveredObject(e)},e.prototype.hoveredObjectChanged=function(){return this._facade.hoveredObjectChanged()},e.prototype.getNextNodeIdAfterRemove=function(e){var t,n=this.getState().nodes,o=n.find((function(t){return t.id===e})),i=this.entity(e);if(!(o&&o.parentId&&i&&i.canBeRemoved()))return null;if((null===(t=i.pane().mainDataSource())||void 0===t?void 0:t.id())===e&&!this.canNodeWithIdBeUnmerged(e)){var c=n.filter((function(e){return 0===e.level})).map((function(e){return e.id})),u=this._takeNextOrPrevElement(c,o.parentId);return Object(r.ensureDefined)(n.find((function(e){return e.id===u}))).children[0]}var s=Object(r.ensureDefined)(n.find((function(e){return e.id===o.parentId}))).children;return 1===s.length?this.getNextNodeIdAfterRemove(o.parentId):this._takeNextOrPrevElement(s,e)},e.prototype._takeNextOrPrevElement=function(e,t){var n=e.indexOf(t);return e[n===e.length-1?n-1:n+1]},e.prototype._getGroupAction=function(){var e=this;return new G.Action({label:Object(l.t)("Create a group of drawings"),icon:K,onExecute:function(){e.createGroupFromSelection()}})},e.prototype._getRenameAction=function(e){var t=this
;return new G.Action({label:Object(l.t)("Rename"),icon:U,onExecute:function(){e(),Object(N.b)("Context menu rename",Object(N.a)(t._objects))}})},e.prototype._getActionsForGroupItem=function(e,t,n){var o=this,r=[new G.Action({label:e.isLocked()?Object(l.t)("Unlock"):Object(l.t)("Lock"),icon:e.isLocked()?V:P,onExecute:function(){return o.setIsLocked(e.id(),!e.isLocked())}}),new G.Action({label:e.isVisible()?Object(l.t)("Hide"):Object(l.t)("Show"),icon:e.isVisible()?H:R,onExecute:function(){return o.setIsVisible(e.id(),!e.isVisible())}}),new G.Action({label:Object(l.t)("Remove"),icon:Q,onExecute:function(){return o.remove(e.id())},hotkeyHash:F.isMacKeyboard?8:46})];return 1===this._objects.length&&(r.unshift(new G.Separator),r.unshift(this._getRenameAction(t))),n&&(r.unshift(new G.Separator),r.unshift(this._getGroupAction())),r},e.prototype._unmergeSelection=function(e){var t=this._getSelectedEntities();if(1!==t.length)throw new Error("Only one object can be unmerged");var n=t[0],o=Object(r.ensureNotNull)(this._model.dataSourceForId(n.id()));if(!J(o))throw new Error("Entity is not IPriceDataSource");(0===e?this._controller.unmergeSourceUp:this._controller.unmergeSourceDown).call(this._controller,o);var i=0===e?"New pane above":"New pane below";Object(N.b)(i,Object(N.a)([n]))},e.prototype._recalculateTree=function(){var e=new B(this._controller).buildTree(),t=e.nodes,n=e.entities;this._nodes=t,this._entitiesCache=n},e.prototype._normalizeTargetAndDropType=function(e,t){var n=this._ensuredEntity(e);return"inside"===t&&(t="before",n=Object(r.ensureDefined)(Object(o.__spreadArrays)(n.children()).shift())),[n,t]},e.prototype._getSelectedEntities=function(){var e=this,t=this._selection.selected().reduce((function(t,n){var o=e._getEntityById(n);return o?(t.selected.push(o),t):(t.removed.push(n),t)}),{selected:[],removed:[]}),n=t.selected,o=t.removed;return o.length&&q.logWarn("Detected dangling sources in selection. They will be ignored: "+JSON.stringify(o)),n},e.prototype._getEntityById=function(e){return this._entitiesCache[e]||this._facade.getObjectById(e)},e}()},m2rF:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("q1tI"),r=o.createContext(null)},"nP+q":function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.Svg="svg",e.Text="text"}(o||(o={}))},nkjW:function(e,t,n){e.exports={title:"title-1TNb3P2I",withoutIcon:"withoutIcon-1Z-6Jrlb",buttons:"buttons-2xuCDHZB",button:"button-2XmGO-Sx",disabled:"disabled-2VEXevOG"}},nn46:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n("JWMC");function r(e,t){Object(o.trackEvent)("Object Tree",e,t)}function i(e){return e.length>1?"Multi select":e[0].gaLabel()}},"p0W+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var o=n("mrSG"),r=n("q1tI"),i=n("TSYQ"),c=n("tU7i"),u=n("EvtC"),s=r.forwardRef((function(e,t){var n=e.className,s=Object(o.__rest)(e,["className"]);return r.createElement(c.b,Object(o.__assign)({},s,{ref:t,className:i(n,u.button)}))}))},p17a:function(e,t,n){
"use strict";n.r(t),n.d(t,"NodeRenderer",(function(){return w})),n.d(t,"Component",(function(){return T}));var o=n("mrSG"),r=n("q1tI"),i=n.n(r),c=n("TSYQ"),u=n("Eyy1"),s=n("Iivm"),a=n("Kxc7"),l=n("YFKU"),d=n("ndO8"),h=n("KCrd"),p=n("nP+q"),f=n("3G1X"),b=n("XAms"),v=n("/3z9"),_=n("m2rF"),g=n("+wZE"),m=n("To8B"),y=n("tyJc"),S=n("20cQ"),O=n("zn4F"),j=n("U+QY"),C=n("gSe6");function w(e){var t=e.id,n=Object(r.useContext)(h.a),c=Object(u.ensureNotNull)(n).viewModel.entity(t);return null===c?null:i.a.createElement(T,Object(o.__assign)({},e,{entity:c}))}function T(e){var t=e.id,n=e.isOffset,w=e.isDisabled,T=e.isSelected,I=e.isChildOfSelected,M=e.isHovered,A=e.parentId,E=e.entity,B=e.isExpanded,x=Object(r.useContext)(h.a),N=Object(r.useContext)(_.a),L=Object(r.useContext)(d.a).size,k=Object(r.useState)(!1),G=k[0],z=k[1],F=Object(r.useRef)(null),D=Object(r.useState)(E.title()),V=D[0],P=D[1],H=Object(r.useState)(E.isLocked()),R=H[0],U=H[1],Q=Object(r.useState)(E.isVisible()),K=Q[0],q=Q[1],J=Object(r.useState)(E.isActualInterval()),Y=J[0],W=J[1],X=Object(r.useState)(!1),Z=X[0],$=X[1],ee=Object(r.useState)(!1),te=ee[0],ne=ee[1],oe=Object(r.useRef)(null);Object(r.useEffect)((function(){var e={};E.onLockChanged().subscribe(e,(function(){return U(E.isLocked())})),E.onVisibilityChanged().subscribe(e,(function(){return q(E.isVisible())}));var t=E.onTitleChanged();return t&&t.subscribe(e,(function(){return P(E.title())})),E.onIsActualIntervalChange().subscribe(e,(function(){return W(E.isActualInterval())})),function(){E.onIsActualIntervalChange().unsubscribeAll(e),E.onLockChanged().unsubscribeAll(e),E.onVisibilityChanged().unsubscribeAll(e),t&&t.unsubscribeAll(e),oe.current&&clearTimeout(oe.current)}}),[]),Object(r.useEffect)((function(){G&&F.current&&(F.current.focus(),F.current.setSelectionRange(0,V.length))}),[G]),Object(r.useEffect)((function(){var e={};return re.hoveredObjectChanged().subscribe(e,ge),function(){re.hoveredObjectChanged().unsubscribeAll(e)}}),[B]),Object(r.useEffect)((function(){re.setHoveredObject(M?t:null)}),[M]),Object(r.useEffect)((function(){!T&&oe.current&&(clearTimeout(oe.current),oe.current=null),z(!1)}),[T]);var re=Object(u.ensureNotNull)(x).viewModel,ie=!K||R,ce=E.getIcon(),ue={};if(A){var se=re.entity(A);se&&(ue["data-parent-name"]=se.title()),ue["data-type"]=E.hasChildren()?"group":"data-source"}var ae=a.enabled("test_show_object_tree_debug")?"<"+E.id()+"> ("+E.zOrder()+")":E.title(),le=M||Z,de=G&&T,he=!!N&&N.isTouch,pe=!!N&&N.isDialog,fe=Y&&K?O:j,be=E.hasChildren()?l.t("Group is hidden on current interval"):l.t("Drawing is hidden on current interval");return i.a.createElement("span",{className:c(C.wrap,ie&&C.modifier,w&&C.disabled,T&&C.selected,n&&C.offset,I&&C.childOfSelected,Z&&!w&&!T&&!I&&C.hover,pe&&!w&&!T&&!I&&C.dialog),onMouseDown:function(e){G&&!Object(u.ensureNotNull)(F.current).contains(e.target)&&ne(!0)},onClick:1===L?ve:function(e){if(e.defaultPrevented)return;if(0!==Object(v.modifiersFromEvent)(e))return;if(oe.current)e.preventDefault(),clearTimeout(oe.current),oe.current=null,
re.openProperties(E),ne(!1);else{var t=re.selection().selected();oe.current=setTimeout((function(){oe.current=null,T&&!te&&1===t.length&&re.rename(E,(function(){return z(!0)})),ne(!1)}),500)}},onContextMenu:he?void 0:ve},!de&&i.a.createElement(r.Fragment,null,ce&&ce.type===p.a.Svg&&i.a.createElement(s.Icon,{icon:ce.content||"",className:C.icon}),ce&&ce.type===p.a.Text&&i.a.createElement("span",{className:c(C.icon,C.textIcon)},ce.content),i.a.createElement("span",Object(o.__assign)({className:c(C.title,re.isMain(E)&&C.main,!E.isVisible()&&C.disabled)},ue),ae),(le||R||!K||he||!Y)&&i.a.createElement("span",{className:c(C.rightButtons,E.canBeRemoved()&&C.twoButtons,E.canBeLocked()&&(le||R)&&C.threeButtons)},E.canBeLocked()&&(le||R)&&i.a.createElement(g.a,{icon:R?y:S,className:c(C.button,C.lockButton),onClick:function(e){if(e.defaultPrevented)return;e.preventDefault(),re.setIsLocked(t,!E.isLocked())},"data-role":"button","data-name":"lock","data-active":R}),(le||!K||!Y)&&i.a.createElement(g.a,{icon:fe,className:c(C.button,C.viewButton,!Y&&[C.warn,"apply-common-tooltip"]),onClick:Y?function(e){if(e.defaultPrevented)return;e.preventDefault(),re.setIsVisible(t,!E.isVisible())}:void 0,title:Y?void 0:be,disabled:!Y,"data-role":"button","data-name":"hide","data-active":!K}),E.canBeRemoved()&&(he||le)&&i.a.createElement(g.a,{icon:m,className:c(C.button,C.removeButton),onClick:function(e){if(e.defaultPrevented)return;e.preventDefault(),re.remove(t)},"data-role":"button","data-name":"remove"}))),de&&i.a.createElement(f.b,{value:V,onChange:function(e){P(e.currentTarget.value)},onClick:b.a,className:C.renameInput,onKeyDown:function(e){27===Object(v.hashFromEvent)(e)?(e.preventDefault(),P(E.title()),z(!1)):13===Object(v.hashFromEvent)(e)&&(e.preventDefault(),_e())},reference:function(e){F.current=e},onBlur:_e,onDragStart:function(e){e.preventDefault(),e.stopPropagation()},draggable:!0}));function ve(e){e.defaultPrevented||G||(e.preventDefault(),e.persist(),re.openContextMenu(E,(function(){return z(!0)}),e))}function _e(){""!==V&&E.setName(V),P(E.title()),z(!1)}function ge(e){if(E.hasChildren()&&!B){var n=E.children(),o=Boolean(n.find((function(t){return t.id()===e})));$(o)}else $(t===e)}}},tU7i:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var o=n("mrSG"),r=n("q1tI"),i=n("TSYQ"),c=n("Iivm"),u=n("bQ7Y"),s=u,a=r.forwardRef((function(e,t){var n,s=e.icon,a=e.isActive,l=e.isOpened,d=e.isDisabled,h=e.isGrouped,p=e.isHovered,f=e.onClick,b=e.text,v=e.textBeforeIcon,_=e.title,g=e.theme,m=void 0===g?u:g,y=e.className,S=e.forceInteractive,O=Object(o.__rest)(e,["icon","isActive","isOpened","isDisabled","isGrouped","isHovered","onClick","text","textBeforeIcon","title","theme","className","forceInteractive"]),j=i(y,m.button,_&&"apply-common-tooltip",((n={})[m.isActive]=a,n[m.isOpened]=l,n[m.isInteractive]=(S||Boolean(f))&&!d,n[m.isDisabled]=d,n[m.isGrouped]=h,n[m.hover]=p,n)),C=s&&("string"==typeof s?r.createElement(c.Icon,{className:m.icon,icon:s}):r.cloneElement(s,{
className:i(m.icon,s.props.className)}));return r.createElement("div",Object(o.__assign)({},O,{ref:t,"data-role":"button",className:j,onClick:d?void 0:f,title:_}),v&&b&&r.createElement("div",{className:i("js-button-text",m.text)},b),C,!v&&b&&r.createElement("div",{className:i("js-button-text",m.text)},b))}))},tyJc:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M7 5.5a2.5 2.5 0 0 1 5 0V7H7V5.5zM6 7V5.5a3.5 3.5 0 1 1 7 0V7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2zm8 2a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V9zm-3 2.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>'},"uIX/":function(e,t,n){"use strict";n.r(t);var o=n("mrSG"),r=n("q1tI"),i=n.n(r),c=n("cvc5"),u=n.n(c),s=n("5rFJ"),a=n("Eyy1"),l=n("TSYQ"),d=n("YFKU"),h=n("Iivm"),p=n("N5tr"),f=n("82wv"),b=n("gla1"),v=n("KCrd"),_=n("p0W+"),g=n("+KIV"),m=n("Z3xJ"),y=n("B6/a"),S=n("nkjW");function O(e){var t=Object(a.ensureNotNull)(Object(r.useContext)(v.a)).viewModel,n=Object(b.a)(),o=t.selection();Object(r.useEffect)((function(){var e={};return t.onChange().subscribe(e,(function(){return n()})),function(){t.onChange().unsubscribeAll(e)}}),[t]),Object(r.useEffect)((function(){var e={};return o.onChange().subscribe(e,(function(){return n()})),function(){o.onChange().unsubscribeAll(e)}}),[o]);var c=!t.canSelectionBeUnmerged(),u=t.isSelectionCopiable(),s=t.isSelectionCloneable(),O=!u&&!s,j=t.canSelectionBeGrouped();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:l(S.title,S.withoutIcon)},Object(d.t)("Object tree"),!1),i.a.createElement("div",{className:S.buttons},i.a.createElement(_.a,{className:l(S.button,!j&&S.disabled),icon:y,onClick:function(){t.createGroupFromSelection()},isDisabled:!j,title:Object(d.t)("Create a group of drawings"),"data-name":"group-button"}),i.a.createElement(f.b,{className:l(S.button,O&&S.disabled),isDisabled:O,content:i.a.createElement(h.Icon,{icon:g}),title:Object(d.t)("Clone, Copy"),arrow:!1,isShowTooltip:!0,"data-name":"copy-clone-button"},u&&i.a.createElement(p.b,{"data-name":"copy",label:Object(d.t)("Copy"),onClick:function(){t.copySelection()}}),s&&i.a.createElement(p.b,{"data-name":"clone",label:Object(d.t)("Clone"),onClick:function(){t.cloneSelection()}})),i.a.createElement(f.b,{className:l(S.button,c&&S.disabled),isDisabled:c,content:i.a.createElement(h.Icon,{icon:m}),title:Object(d.t)("Move to"),arrow:!1,isShowTooltip:!0,"data-name":"move-to-button"},i.a.createElement(p.b,{"data-name":"new-pane-above",label:Object(d.t)("New pane above"),onClick:function(){t.unmergeSelectionUp()}}),i.a.createElement(p.b,{"data-name":"new-pane-below",label:Object(d.t)("New pane below"),onClick:function(){t.unmergeSelectionDown()}}))))}var j=n("Q+za"),C=n("rRWa"),w=n("dy8f"),T=n("6UvQ"),I=n("ddGQ"),M=n("nn46"),A=n("eT4H");function E(e){return Object(C.c)((function(t){var n={};return e.onChange().subscribe(n,(function(){return t(Object(w.h)())})),
e.onGroupCreated().subscribe(n,(function(e){return t(Object(w.n)(e,!0))})),e.selection().onChange().subscribe(n,(function(e){return t(Object(w.q)(e))})),function(){e.onChange().unsubscribeAll(n),e.selection().onChange().unsubscribeAll(n),e.onGroupCreated().unsubscribeAll(n)}}),C.a.expanding())}function B(){return Object(o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Object(s.i)([I.k,I.l])];case 1:return e.sent(),Object(M.b)("Select","Arrow"),[3,0];case 2:return[2]}}))}function x(){var e;return Object(o.__generator)(this,(function(t){switch(t.label){case 0:return[4,Object(s.i)(I.p)];case 1:return 1===(e=t.sent().mode)&&Object(M.b)("Multi select","Ctrl"),2===e&&Object(M.b)("Multi select","Shift"),[3,0];case 2:return[2]}}))}function N(e){var t,n,r,i,c,u,l,d;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Object(s.i)(I.a)];case 1:return o.sent(),i=A.a,[4,Object(s.h)()];case 2:return t=i.apply(void 0,[o.sent()]),n=t.node,r=t.dropType,n?(u=A.o,[4,Object(s.h)()]):[3,4];case 3:c=u.apply(void 0,[o.sent()]),l=c.map((function(t){return Object(a.ensureNotNull)(e.entity(t.id))})),d="Drag",1===n.level&&"inside"!==r&&c.some((function(e){return 2===e.level}))?d="From the group":2!==n.level&&"inside"!==r||!c.some((function(e){return 1===e.level}))?1===c.length&&c[0].parentId!==n.parentId&&(d="Existing pane"):d="To the group",Object(M.b)(d,Object(M.a)(l)),o.label=4;case 4:return[3,0];case 5:return[2]}}))}function L(e){return Object(o.__generator)(this,(function(t){switch(t.label){case 0:return[4,Object(s.e)(B)];case 1:return t.sent(),[4,Object(s.e)(x)];case 2:return t.sent(),[4,Object(s.e)(N,e)];case 3:return t.sent(),[2]}}))}function k(e){var t,n;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Object(s.e)(L,e)];case 1:return o.sent(),[4,Object(s.b)(E,e)];case 2:t=o.sent(),T.b.logNormal("Opened object tree data source channel"),o.label=3;case 3:o.trys.push([3,,8,9]),o.label=4;case 4:return[4,Object(s.i)(t)];case 5:return n=o.sent(),[4,Object(s.g)(n)];case 6:return o.sent(),[3,4];case 7:return[3,9];case 8:return T.b.logNormal("Closed object tree data source channel"),t.close(),[7];case 9:return[2]}}))}var G=n("5VQP"),z=n("m2rF"),F=n("XAms");var D=n("h5pj");n.d(t,"ObjectTree",(function(){return P}));var V=Modernizr.mobiletouch?"touch":"native";function P(e){var t=e.viewModel,n=e.showHeader,c=void 0===n||n,a=e.nodeRenderer,l=e.isDialog,d=void 0!==l&&l,h=Object(r.useRef)(null),p=function(e){var t=Object(r.useState)(e.getChartId()),n=t[0],o=t[1],i=Object(r.useRef)(n);return i.current=n,Object(r.useEffect)((function(){return e.onChange().subscribe(null,t),function(){e.onChange().unsubscribe(null,t)};function t(){var t=e.getChartId();i.current!==t&&o(t)}}),[]),n}(t),f=function(){var e=Object(r.useState)(null),t=e[0],n=e[1];return[Object(r.useCallback)((function(e){e.width===(null==t?void 0:t.width)&&e.height===t.height||n(e)}),[t]),t]}(),b=f[0],_=f[1],g=Object(r.useState)(null),m=g[0],y=g[1],S=Object(r.useMemo)((function(){return{isTouch:Modernizr.touch,
isDialog:d}}),[d]);return i.a.createElement(z.a.Provider,{value:S},i.a.createElement(v.a.Provider,{value:{viewModel:t}},i.a.createElement("div",{className:D.wrap,onContextMenu:F.b},c&&i.a.createElement(O,null),i.a.createElement(u.a,{onMeasure:b},i.a.createElement("div",{className:D.space,onClick:function(e){if(e.defaultPrevented)return;if(!(e.target instanceof Element)||null===h.current)return;e.target===h.current&&t.selection().set([])}},null!==_&&i.a.createElement(j.a,{key:p,height:_.height,width:_.width,canBeAddedToSelection:function(e){var n=t.entity(e);return t.selection().canBeAddedToSelection(n)},nodeRenderer:a,initState:function(){var e=t.getState(),n=e.nodes;return{selectedIds:e.selection,nodes:n}},canMove:function(e,n,o){return t.isSelectionDropable(n.id,o)},drag:V,rowHeight:H,onSelect:function(e){var n=e.map((function(e){return t.entity(e)})).filter((function(e){return null!==e}));t.selection().set(n);var o=G.ContextMenuManager.getShown();o&&o.hide()},onDrop:function(e){e.preventDefault();var n=e.detail,o=n.target,r=n.type;t.insertSelection(o,r)},scrollToId:m,saga:function(){return Object(o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Object(s.e)(k,t)];case 1:return e.sent(),[2]}}))},onKeyboardSelect:function(e){y({id:e})},outerRef:function(e){h.current=e}}))))))}function H(e,t){switch(t.type){case"node":return 38;case"separator":return 13}}},zn4F:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M2.448 10.124a10.82 10.82 0 0 1-.336-.609L2.105 9.5l.007-.015a12.159 12.159 0 0 1 1.686-2.466C5.002 5.665 6.752 4.373 9.05 4.373c2.297 0 4.047 1.292 5.25 2.646a12.166 12.166 0 0 1 1.687 2.466l.007.015-.007.015a12.163 12.163 0 0 1-1.686 2.466c-1.204 1.354-2.954 2.646-5.251 2.646-2.298 0-4.048-1.292-5.252-2.646a12.16 12.16 0 0 1-1.35-1.857zm14.558-.827l-.456.203.456.203v.002l-.003.005-.006.015-.025.052a11.813 11.813 0 0 1-.461.857 13.163 13.163 0 0 1-1.463 2.011c-1.296 1.46-3.296 2.982-5.998 2.982-2.703 0-4.703-1.522-6-2.982a13.162 13.162 0 0 1-1.83-2.677 7.883 7.883 0 0 1-.118-.243l-.007-.015-.002-.005v-.001l.456-.204-.456-.203v-.002l.002-.005.007-.015a4.66 4.66 0 0 1 .119-.243 13.158 13.158 0 0 1 1.83-2.677c1.296-1.46 3.296-2.982 5.999-2.982 2.702 0 4.702 1.522 5.998 2.981a13.158 13.158 0 0 1 1.83 2.678 8.097 8.097 0 0 1 .119.243l.006.015.003.005v.001zm-.456.203l.456-.203.09.203-.09.203-.456-.203zM1.092 9.297l.457.203-.457.203-.09-.203.09-.203zm9.958.203c0 1.164-.917 2.07-2 2.07-1.084 0-2-.906-2-2.07 0-1.164.916-2.07 2-2.07 1.083 0 2 .906 2 2.07zm1 0c0 1.695-1.344 3.07-3 3.07-1.657 0-3-1.375-3-3.07 0-1.695 1.343-3.07 3-3.07 1.656 0 3 1.375 3 3.07z"/></svg>'}}]);