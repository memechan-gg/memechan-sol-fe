(window.webpackJsonp=window.webpackJsonp||[]).push([["partially-closing-dialog"],{"+l/S":function(e,t,n){},"+reD":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("q1tI"),o=n("XYXm"),a=n("TSYQ");function s(e){return r.createElement("div",{className:a(o.body,e.className),ref:e.reference},e.children)}},"/KDZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("mrSG"),o=n("q1tI"),a=function(e){function t(t){var n=e.call(this,t)||this;return n._handleChange=function(){n.forceUpdate()},n.state={query:window.matchMedia(n.props.rule)},n}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this._subscribe(this.state.query)},t.prototype.componentDidUpdate=function(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))},t.prototype.componentWillUnmount=function(){this._unsubscribe(this.state.query)},t.prototype.render=function(){return this.props.children(this.state.query.matches)},t.getDerivedStateFromProps=function(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null},t.prototype._subscribe=function(e){e.addListener(this._handleChange)},t.prototype._unsubscribe=function(e){e.removeListener(this._handleChange)},t}(o.PureComponent)},"1O6C":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("mrSG"),o=n("q1tI"),a=n("TSYQ"),s=n("+EG+"),i=n("jAh7"),u=n("QpNh"),c=n("aYmi"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._manager=new i.OverlapManager,t._handleSlot=function(e){t._manager.setContainer(e)},t}return Object(r.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.rounded,n=void 0===t||t,i=e.shadowed,l=void 0===i||i,p=e.fullscreen,d=void 0!==p&&p,m=e.darker,f=void 0!==m&&m,h=e.className,v=e.backdrop,b=a(h,c.dialog,n&&c.rounded,l&&c.shadowed,d&&c.fullscreen,f&&c.darker),g=Object(u.a)(this.props),w=this.props.style?Object(r.__assign)(Object(r.__assign)({},this._createStyles()),this.props.style):this._createStyles();return o.createElement(o.Fragment,null,o.createElement(s.b.Provider,{value:this._manager},v&&o.createElement("div",{onClick:this.props.onClickBackdrop,className:c.backdrop}),o.createElement("div",Object(r.__assign)({},g,{className:b,style:w,ref:this.props.reference,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:-1}),this.props.children)),o.createElement(s.a,{reference:this._handleSlot}))},t.prototype._createStyles=function(){var e=this.props,t=e.bottom,n=e.left,r=e.width;return{bottom:t,left:n,right:e.right,top:e.top,zIndex:e.zIndex,maxWidth:r,height:e.height}},t}(o.PureComponent)},"2A9e":function(e){
e.exports=JSON.parse('{"button":"button-1iktpaT1","content":"content-2PGssb8d","noOutline":"noOutline-d9Yp4qvi","appearance-default":"appearance-default-dMjF_2Hu","intent-primary":"intent-primary-1-IOYcbg","intent-success":"intent-success-25a4XZXM","intent-default":"intent-default-2ZbSqQDs","intent-warning":"intent-warning-24j5HMi0","intent-danger":"intent-danger-1EETHCla","appearance-stroke":"appearance-stroke-12lxiUSM","appearance-text":"appearance-text-DqKJVT3U","appearance-inverse":"appearance-inverse-r1Y2JQg_","size-s":"size-s-3mait84m","size-m":"size-m-2G7L7Qat","size-l":"size-l-2NEs9_xt","size-p":"size-p-3D4rn3v0","full-width":"full-width-1wU8ljjC","with-icon":"with-icon-yumghDr-","icon":"icon-1grlgNdV"}')},"4vL2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getButtonClasses=void 0;var r=n("TSYQ");t.getButtonClasses=function(e,t){var n=t.intent,o=void 0===n?"primary":n,a=t.size,s=void 0===a?"m":a,i=t.appearance,u=void 0===i?"default":i,c=t.useFullWidth,l=void 0!==c&&c,p=t.tabIndex,d=void 0===p?0:p,m=t.icon,f=t.className;return r(f,e.button,e["size-"+s],e["intent-"+o],e["appearance-"+u],l&&e["full-width"],-1===d&&e.noOutline,m&&"s"!==s&&e["with-icon"])}},ASyk:function(e,t,n){e.exports={"tablet-normal-breakpoint":"screen and (max-width: 768px)","small-height-breakpoint":"screen and (max-height: 360px)","tablet-small-breakpoint":"screen and (max-width: 419px)"}},Iivm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("mrSG").__exportStar(n("swCq"),t)},RgaO:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("mrSG"),o=n("8Rai");function a(e){var t=e.children,n=Object(r.__rest)(e,["children"]);return t(Object(o.a)(n))}},"SK/v":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("mrSG"),o=n("q1tI"),a=n("TSYQ"),s=n("1O6C"),i=n("uqKQ"),u=n("RgaO"),c=n("UJLh"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._containerRef=null,t._handleContainerRef=function(e){t._containerRef=e},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){var e;this.props.autofocus&&(null===(e=this._containerRef)||void 0===e||e.focus())},t.prototype.render=function(){var e=this,t=this.props,n=t.zIndex,i=t.onClickOutside,l=t.children,p=t.className;return o.createElement("div",{ref:this._handleContainerRef,style:{zIndex:n},"data-dialog-name":this.props["data-dialog-name"],tabIndex:-1},o.createElement("div",{className:c.backdrop}),o.createElement("div",{className:c.wrap},o.createElement("div",{className:c.container},o.createElement(u.a,{mouseDown:!0,touchStart:!0,handler:i},(function(t){return o.createElement("div",{className:c.modal,ref:t},o.createElement(s.a,Object(r.__assign)({},e.props,{className:a(p,c.dialog)}),l))})))))},t.defaultProps={width:500},t}(o.PureComponent),p=Object(i.a)(l)},UJLh:function(e,t,n){e.exports={wrap:"wrap-3axdIL2R",container:"container-p3zks2PX",backdrop:"backdrop-1qZHPwi_",modal:"modal-GUK9cvUQ",dialog:"dialog-2Ei1ngXh"}},V6cB:function(e,t,n){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var r=n("mrSG"),o=n("q1tI"),a=n("TSYQ"),s=n("4vL2"),i=n("2A9e");n("+l/S"),t.Button=function(e){var t=e.className,n=e.intent,u=e.size,c=e.appearance,l=e.disabled,p=e.useFullWidth,d=e.reference,m=e.icon,f=e.children,h=e.tabIndex,v=r.__rest(e,["className","intent","size","appearance","disabled","useFullWidth","reference","icon","children","tabIndex"]),b=s.getButtonClasses(i,{intent:n,size:u,appearance:c,disabled:l,useFullWidth:p,tabIndex:h,icon:m});return o.createElement("button",r.__assign({className:a(b,t),disabled:l,ref:d,tabIndex:h},v),m&&"s"!==u&&o.createElement("span",{className:i.icon},m),o.createElement("span",{className:i.content},f))}},XYXm:function(e,t,n){e.exports={body:"body-2N-vuwQW"}},ZVs3:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("q1tI"),o=n("TSYQ"),a=n("kgsH"),s=n("uo4K"),i=n("Iivm");function u(e){var t=e.hideIcon?null:r.createElement(i.Icon,{className:a.close,icon:s,onClick:e.onClose});return r.createElement("div",{className:o(a.header,e.className),"data-dragg-area":!0,ref:e.reference},e.children,t)}},aYmi:function(e,t,n){e.exports={dialog:"dialog-2APwxL3O",rounded:"rounded-tXI9mwGE",shadowed:"shadowed-2M13-xZa",fullscreen:"fullscreen-2RqU2pqU",darker:"darker-2nhdv2oS",backdrop:"backdrop-1tKdKmN_"}},"e95/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnchorButton=void 0;var r=n("mrSG"),o=n("q1tI"),a=n("TSYQ"),s=n("4vL2"),i=n("2A9e");n("+l/S"),t.AnchorButton=function(e){var t=e.className,n=e.intent,u=e.size,c=e.appearance,l=e.disabled,p=e.useFullWidth,d=e.reference,m=e.icon,f=e.children,h=e.href,v=e.tabIndex,b=r.__rest(e,["className","intent","size","appearance","disabled","useFullWidth","reference","icon","children","href","tabIndex"]),g=s.getButtonClasses(i,{intent:n,size:u,appearance:c,disabled:l,useFullWidth:p,tabIndex:v,icon:m});return o.createElement("a",r.__assign({className:a(t,g),href:l?void 0:h,"aria-disabled":l,ref:d,tabIndex:v},b),m&&"s"!==u&&o.createElement("span",{className:i.icon},m),o.createElement("span",{className:i.content},f))}},io9C:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("q1tI"),o=n("kQXJ"),a=n("TSYQ");function s(e){return r.createElement("div",{className:a(o.footer,e.className),ref:e.reference},e.children)}},kQXJ:function(e,t,n){e.exports={footer:"footer-2Zoji8zg"}},kgsH:function(e,t,n){e.exports={header:"header-dpl-vtN_",close:"close-3kPn4OTV"}},"m6W+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("9XXR"),o=n("Ialn"),a=n("qFKp"),s=function(){function e(e){void 0===e&&(e=" "),this._divider=e}return e.prototype.format=function(e){var t=Object(r.splitThousands)(e,this._divider);return Object(o.isRtl)()&&a.isChrome?Object(o.startWithLTR)(t):t},e.prototype.parse=function(e){var t=Object(o.stripLTRMarks)(e).split(this._divider).join(""),n=Number(t);return isNaN(n)||/e/i.test(t)?{res:!1}:{res:!0,value:n,suggest:this.format(n)}},e}()},mwqF:function(e,t,n){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});var r=n("mrSG");r.__exportStar(n("V6cB"),t),r.__exportStar(n("e95/"),t)},qhWn:function(e,t,n){e.exports={footer:"footer-38-uw13l",cancelButton:"cancelButton-2eyad4If",body:"body-3dXoq991",input:"input-p1_m9H3i",units:"units-2nMKHdVg",message:"message-wdIgMYCZ",inputMessage:"inputMessage-1D9rwyLw"}},"sZV+":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("q1tI"),o=function(){var e=Object(r.useState)(!window.navigator.onLine),t=e[0],n=e[1],o=function(e){return n("offline"===e.type)};return Object(r.useEffect)((function(){return window.addEventListener("online",o),window.addEventListener("offline",o),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}})),t}},swCq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var r=n("mrSG"),o=n("q1tI");t.Icon=o.forwardRef((function(e,t){var n=e.icon,a=void 0===n?"":n,s=r.__rest(e,["icon"]);return o.createElement("span",r.__assign({},s,{ref:t,dangerouslySetInnerHTML:{__html:a}}))}))},uhCe:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("ASyk"),o={SmallHeight:r["small-height-breakpoint"],TabletSmall:r["tablet-small-breakpoint"],TabletNormal:r["tablet-normal-breakpoint"]}},uo4K:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="currentColor" d="M5.18 6.6L1.3 2.7.6 2 2 .59l.7.7 3.9 3.9 3.89-3.9.7-.7L12.61 2l-.71.7L8 6.6l3.89 3.89.7.7-1.4 1.42-.71-.71L6.58 8 2.72 11.9l-.71.7-1.41-1.4.7-.71 3.9-3.9z"/></svg>'},uqKQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("mrSG"),o=n("q1tI"),a=n("AiMB");function s(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(n,t),n.prototype.render=function(){var t=this.props,n=t.isOpened,s=t.root;if(!n)return null;var i=o.createElement(e,Object(r.__assign)({},this.props,{zIndex:150}));return"parent"===s?i:o.createElement(a.a,null,i)},n}(o.PureComponent)}},xx2B:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n("mrSG"),o=n("q1tI"),a=n.n(o),s=(n("YFKU"),n("WboT")),i=n("m6W+"),u=n("zXvd"),c=n("nc0P"),l=n("Hr11"),p=window.t("Number format is invalid."),d=window.t("Specified value is less that the instrument minimum."),m=window.t("Specified value is more than the instrument maximum."),f=new i.a,h=/^-?[0-9]*$/,v=function(e){function t(t){var n=e.call(this,t)||this;n._onFocus=function(e){n.setState({focused:!0}),n.props.onFocus&&n.props.onFocus(e)},n._onBlur=function(e){n.setState({displayValue:b(n.props,n.props.value),focused:!1}),n.props.errorHandler&&n.props.errorHandler(!1),n.props.onBlur&&n.props.onBlur(e)},n._onValueChange=function(e){var t=e.target.value;if(void 0!==n.props.onEmptyString&&""===t&&n.props.onEmptyString(),"integer"!==n.props.mode||h.test(t)){var r=g(t,n.props.formatter),o=r.res?n._checkValueBoundaries(r.value):{value:!1
},a=r.res&&!o.value,s=r.res&&r.suggest&&!n.state.focused?r.suggest:t,i=a&&o.msg?o.msg:p;n.setState({displayValue:s,errorMsg:i}),r.res&&o.value&&n.props.onValueChange(r.value,"input"),n.props.errorHandler&&n.props.errorHandler(!r.res||a)}},n._onValueByStepChange=function(e){var t=n.props,r=t.roundByStep,o=void 0===r||r,a=t.step,s=void 0===a?1:a,i=t.formatter,u=g(n.state.displayValue,i),l=s;if(u.res){var p=new c.Big(u.value),d=new c.Big(s),m=p.mod(d),f=p.plus(e*s);!m.eq(0)&&o&&(f=f.plus((e>0?0:1)*s).minus(m)),l=Number(f)}n._checkValueBoundaries(l).value&&(n.setState({displayValue:b(n.props,l)}),n.props.onValueChange(l,"step")),n.props.errorHandler&&n.props.errorHandler(!1)};var r=t.value;return n.state={value:r,displayValue:b(t,r),focused:!1,errorMsg:p},n}return Object(r.__extends)(t,e),t.prototype.render=function(){return a.a.createElement(s.a,{inputMode:this.props.inputMode,borderStyle:this.props.borderStyle,fontSizeStyle:this.props.fontSizeStyle,value:this.state.displayValue,forceShowControls:this.props.forceShowControls,className:this.props.className,button:this.props.button,placeholder:this.props.placeholder,innerLabel:this.props.innerLabel,disabled:this.props.disabled,error:this.props.error,errorMessage:this.props.errorMessage||this.state.errorMsg,onValueChange:this._onValueChange,onValueByStepChange:this._onValueByStepChange,containerReference:this.props.containerReference,inputReference:this.props.inputReference,onClick:this.props.onClick,onFocus:this._onFocus,onBlur:this._onBlur,onKeyDown:this.props.onKeyDown,controlDecKeyCodes:this.props.controlDecKeyCodes,controlIncKeyCodes:this.props.controlIncKeyCodes})},t.prototype.getClampedValue=function(){var e=this.props,t=e.min,n=void 0===t?-1/0:t,r=e.max,o=void 0===r?9e15:r,a=g(this.state.displayValue,this.props.formatter);return a.res?Object(l.clamp)(a.value,n,o):null},t.getDerivedStateFromProps=function(e,t){var n=e.alwaysUpdateValueFromProps,r=e.value;return t.focused&&!n||t.value===r?null:{value:r,displayValue:b(e,r)}},t.prototype._checkValueBoundaries=function(e){var t=this.props,n=t.min,r=void 0===n?-1/0:n,o=t.max,a=function(e,t,n){var r=e>=t,o=e<=n;return{passMin:r,passMax:o,pass:r&&o,clamped:Object(l.clamp)(e,t,n)}}(e,r,void 0===o?9e15:o),s=a.passMax?a.passMin?void 0:d:m;return{value:a.pass,msg:s}},t}(a.a.PureComponent);function b(e,t){var n=e.useFormatter,r=void 0===n||n,o=e.formatter,a=e.mode;return r&&"integer"!==a?function(e,t){void 0===t&&(t=f);return null!==e?t.format(e):""}(t,o):function(e){if(null===e)return"";return u.NumericFormatter.formatNoE(e)}(t)}function g(e,t){return void 0===t&&(t=f),t.parse?t.parse(e):{res:!1,error:"Formatter does not support parse"}}},zSOM:function(e,t,n){"use strict";n.r(t),n.d(t,"PartiallyClosingDialog",(function(){return y}));var r=n("q1tI"),o=n.n(r),a=n("fV0y"),s=n("mwqF"),i=n("nc0P"),u=n.n(i),c=(n("YFKU"),n("+reD")),l=n("SK/v"),p=n("/KDZ"),d=n("qFKp"),m=n("uhCe"),f=n("/3z9"),h=n("sZV+"),v=n("ZVs3"),b=n("io9C"),g=n("xx2B"),w=n("qhWn");function y(e){
var t=e.positionOrTrade,n=e.onClose,i=e.dialogActionHandler,y=e.qtyFormatter,_=e.supportLots,S=e.qtyStep,C=e.minQty,x=e.message,E=Object(r.useMemo)((function(){return Math.abs(t.qty)}),[t.qty]),O=Object(r.useState)(!0),N=O[0],k=O[1],j=Object(r.useState)(!1),q=j[0],M=j[1],I=Object(r.useState)(E),B=I[0],F=I[1],V=Object(r.useState)(),z=V[0],L=V[1],D=Object(r.useState)(!0),K=D[0],P=D[1],Q=d.CheckMobile.any(),R=Object(h.a)(),T=Object(r.useRef)(null),H=Object(r.useCallback)((function(e){var t;null===e?t=window.t("Number format is invalid."):e>E?t=window.t("Specified value is more than the instrument maximum."):e!==E&&e<C?t=window.t("Specified value is less that the instrument minimum."):e!==E&&"0"!==new u.a(e).mod(new u.a(S)).valueOf()&&(t=window.t("Specified value is not a multiple of quantity step."));var n=void 0===t;return P(n),L(t),n}),[E,S,C]);return Object(r.useEffect)((function(){R&&G()}),[R,G]),Object(r.useEffect)((function(){!Q&&T.current&&T.current.focus()}),[N]),Object(r.useEffect)((function(){H(B)}),[B,H]),o.a.createElement(p.a,{rule:m.a.TabletSmall},(function(e){return o.a.createElement(l.a,{isOpened:N,shouldForceFocus:!0,onKeyDown:U,reference:T,fullscreen:e},o.a.createElement(v.a,{onClose:G},window.t("Close position")),o.a.createElement(c.a,{className:w.body},o.a.createElement("p",{className:w.message},x),o.a.createElement(a.Checkbox,{name:"partially-close-checkbox",label:window.t("Partial close"),checked:q,onChange:Y,disabled:!1,indeterminate:!1,labelPositionReverse:!1}),q&&o.a.createElement("form",{className:w.form,onSubmit:W},o.a.createElement(g.a,{useFormatter:!0,error:!K,errorMessage:z,className:w.input,value:B,formatter:y,forceShowControls:!1,step:S,mode:"float",onValueChange:X,onEmptyString:Z,innerLabel:o.a.createElement("p",{className:w.units},window.t("of {positionQty}",{context:"close_position_total"}).format({positionQty:String(E)}))}),o.a.createElement("span",{className:w.inputMessage},_?window.t("Lots to close"):window.t("Units to close")))),o.a.createElement(b.a,{className:w.footer},o.a.createElement(s.Button,{type:"submit",size:"m",disabled:!K,onClick:W},window.t("Close position")),o.a.createElement("span",{className:w.cancelButton},o.a.createElement(s.Button,{appearance:"stroke",size:"m",onClick:G},window.t("Cancel")))))}));function U(e){27===Object(f.hashFromEvent)(e)&&G()}function Y(){M((function(e){return!e}))}function G(){k(!1),i({status:!1}),n()}function W(e){e.preventDefault(),null!==B&&H(B)&&(i({status:!0,qty:B}),k(!1),n())}function X(e){F(e)}function Z(){F(null)}}}}]);