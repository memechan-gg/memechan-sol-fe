(window.webpackJsonp=window.webpackJsonp||[]).push([["trading-account-manager"],{"040A":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 26" width="3" height="13"><circle cx="3" cy="3" r="3"/><circle cx="3" cy="13" r="3"/><circle cx="3" cy="23" r="3"/></svg>'},"0dtH":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0},o=i("aIyQ");var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._delegates=t,i._isSubscribed=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"subscribe",value:function(t,i,n){var r=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"subscribe",this).call(this,t,i,n),!this._isSubscribed&&this._listeners.length&&this._delegates.forEach((function(t){return t.subscribe(r,r._onFire)}))}},{key:"unsubscribe",value:function(t,i){var n=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unsubscribe",this).call(this,t,i),this._isSubscribed&&0===this._listeners.length&&this._delegates.forEach((function(t){return t.unsubscribe(n,n._onFire)}))}},{key:"_onFire",value:function(){this.fire.apply(this,arguments)}}]),e}(((n=o)&&n.__esModule?n:{default:n}).default);e.default=a,t.exports=e.default},"0sbS":function(t,e,i){"use strict";i.r(e),i.d(e,"createEditButton",(function(){return a})),i.d(e,"createCloseButton",(function(){return l})),i.d(e,"createMessageButton",(function(){return c})),i.d(e,"getSettingsButtons",(function(){return u}));var n=i("CRS4"),r=i("BhuR"),s=i("drKH");i("YFKU");function o(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.childNodes[0]}function a(t,e){var i=o('\n\t\t<span class="tv-data-table__button tv-data-table__edit-button" title="'+(e||window.t("Edit"))+'">\n\t\t\t'+n+"\n\t\t</span>");return i.addEventListener("click",(function(e){return t()})),i}function l(t,e){var i=o('\n\t\t<span class="tv-data-table__button tv-data-table__close-button" title="'+(e||window.t("Close",{context:"position"
}))+'">\n\t\t\t'+r+"\n\t\t</span>");return i.addEventListener("click",(function(e){return t()})),i}function c(t){return o('\n\t\t<span class="apply-common-tooltip tv-data-table__button tv-data-table__information-button '+t.type+'" title="'+t.text+'">\n\t\t\t'+s+"\n\t\t</span>")}function u(t,e,i,n,r){var s=document.createElement("span");if(void 0!==r){var o=c(r);s.appendChild(o)}if(i){var u=a(i,n);s.appendChild(u)}if(t){var d=l(t,e);s.appendChild(d)}return s}},"6f6E":function(t,e,i){"use strict";i.r(e),i.d(e,"AccountSummaryRow",(function(){return r}));var n=i("xZ9U");var r=function(){function t(t,e){this._infoUnsubscribe=[],this._infoUnsubscribe=e.reverse().map((function(e,i){var r="js-"+i,s=function(t,e){void 0===e&&(e="");var i=document.createElement("div");i.className="tv-account-manager__el "+e;var n=document.createElement("div");n.className="tv-account-manager__text",n.textContent=t;var r=document.createElement("div");return r.className="tv-account-manager__data js-collateral-value",i.appendChild(n),i.appendChild(r),i}(e.text,r),o=s.getElementsByClassName("js-collateral-value")[0];t.appendChild(s);var a=e.formatter||"fixed",l=Object(n.tableFormatterByName)(a),c=function(t){var e=l.format({value:t,$container:$(o),row:{}});o.textContent=e.toString().replace(/&nbsp;/g," ")};return e.wValue.subscribe(c),void 0!==e.wValue.value()&&c(e.wValue.value()),function(){return e.wValue.unsubscribe(c)}}))}return t.prototype.destroy=function(){this._infoUnsubscribe.forEach((function(t){return t()}))},t}()},"7XZl":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropdownView=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i("TkT6");var r=i("29gu"),s=i("sFgq"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("wmOI"));function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=e.DropdownView=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t),this.$el=e,this.$wrap=n.$wrap||e.find(".tv-dropdown-behavior__button"),this.$body=n.$body||e.find(".tv-dropdown-behavior__body"),this.notCloseWithCtrl=!!n.notCloseWithCtrl&&n.notCloseWithCtrl,this.closeWithEsc=void 0===n.closeWithEsc||n.closeWithEsc,this.closeWithEsc&&this.$el.attr("tabIndex",0),(e.data("scroll")||n.scroll)&&(this.$scroll=this.$body.find(".tv-dropdown-behavior__scroll"),this.$inScroll=this.$scroll.find(".tv-dropdown-behavior__inscroll"),this.scroll=new s.SidebarCustomScroll(this.$scroll,this.$inScroll,{showTopShadow:!1,showBottomShadow:!1}),this.$scrollBar=this.scroll.getScrollBar(),this.$scrollBar&&this.$scrollBar.on("mousedown.tv-dropdown-view-scroll",(function(){i.offClickOutside(),$(document).on("mouseup.tv-dropdown-view-scroll",(function(){
i.onClickOutside(),$(document).off("mouseup.tv-dropdown-view-scroll")}))}))),(e.data("adaptBody")||n.adaptBody)&&(this._adaptBody=!0),(e.data("adaptOnlyInScrollHeight")||n.adaptOnlyInScrollHeight)&&(this._adaptOnlyInScrollHeight=!0),this._fitScreen=e.data("fitScreen")||n.fitScreen,this._maxHeight=e.data("maxHeight")||n.maxHeight,this._dropdownWidth=e.data("dropdownWidth")||n.dropdownWidth,this._boundingElement=n.boundingElement,this.$wrap.add(e.find(".js-dropdown-toggle")).on("click",(function(t){$(t.currentTarget).hasClass("js-prevent-dropdown")||i.toggle()})),this._checkIgnoreClickOutside=[]}return n(t,[{key:"toggle",value:function(){this.opened?this.close(!0):this.open()}},{key:"open",value:function(){var t=this;this.opened||this.disabled||this.readonly||(this.$el.trigger("beforeOpenMenu"),this.$body.removeClass("i-hidden").addClass("i-opened"),this.$wrap.addClass("i-dropped"),this.$el.addClass("i-opened"),"horz"===this._fitScreen&&this.fitHorizontally(),this._adaptBody&&this.adaptBody(),this.onClickOutside(),this.$el.trigger("updateScroll"),this.$el.trigger("afterOpenMenu"),this.opened=!0,this.closeWithEsc&&this.$el.on("keypress keyup",(function(e){e.keyCode===o.ESC&&t.close(!0)})))}},{key:"onClickOutside",value:function(){var t=this;setTimeout((function(){t.$body.on("clickoutside",(function(e){t._checkIgnoreClickOutside.length&&t._checkIgnoreClickOutside.some((function(t){return t(e)}))||t.close(!0)}))}),0)}},{key:"offClickOutside",value:function(){this.$body.off("clickoutside")}},{key:"setCheckIgnoreClickOutside",value:function(t){this._checkIgnoreClickOutside.push(t)}},{key:"dropCheckIgnoreClickOutside",value:function(t){var e=this._checkIgnoreClickOutside.indexOf(t);-1!==e&&this._checkIgnoreClickOutside.splice(e,1)}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.opened||this.disabled||this.readonly||!t&&this.notCloseWithCtrl&&(window.event.ctrlKey||window.event.metaKey)||(this.offClickOutside(),this.$wrap.removeClass("i-dropped"),this.$el.trigger("beforeCloseMenu"),this.$body.removeClass("i-opened").addClass("i-hidden"),this.$el.removeClass("i-opened"),this.closeWithEsc&&this.$el.off("keypress keyup"),this.opened=!1,this.$el.trigger("afterCloseMenu"))}},{key:"isOpened",value:function(){return this.opened}},{key:"updateScroll",value:function(){this.scroll&&(this.scroll.updateScrollBar(),this.scroll.scrollToStart())}},{key:"enable",value:function(){this.$wrap.removeClass("i-disabled"),this.disabled=!1}},{key:"disable",value:function(){this.$wrap.addClass("i-disabled"),this.disabled=!0}},{key:"setReadonly",value:function(t){this.readonly=t}},{key:"adaptBody",value:function(){var t=this.$body,e=this.$wrap.get(0).getBoundingClientRect(),i=this._boundingElement?this._boundingElement.getBoundingClientRect():{top:0,bottom:window.innerHeight,height:window.innerHeight},n=parseFloat(t.css("padding-top")),r=parseFloat(t.css("padding-bottom")),s=this.$inScroll.outerHeight(!0)+n+r;if(this.scroll&&this.scroll.scrollToStart(),this._adaptOnlyInScrollHeight){
var o=t.find(".js-dropdown-dummy"),a=o?parseFloat(o.css("padding-bottom"))+parseFloat(o.css("margin-bottom")):0,l=e.top+e.height+a;this.$el.find(".tv-dropdown-behavior__scroll").css("maxHeight",i.bottom-r-l-25)}else{var c=this._maxHeight||s,u=e.top+c+25<=i.bottom,d=i.top+15+c<=e.bottom,h=this._maxHeight||"auto",p=void 0;if(u)p=-n;else if(d)p=-c+e.height+r;else{p=-e.top+i.top+15;var _=i.height-15-25;c>_&&(h=_)}t.css("top",p),t.height(h),this._dropdownWidth&&t.width(this._dropdownWidth)}}},{key:"fitHorizontally",value:function(){this.$body.css("marginLeft",0);var t=document.body.getBoundingClientRect(),e=parseFloat($(document.body).css("paddingRight")),i=this.$body.offset();i.right=i.left+this.$body.outerWidth();var n=Math.max(Math.min(0,t.right-e-i.right),t.left-i.left);n&&this.$body.css("marginLeft",n)}},{key:"destroy",value:function(){this.scroll&&this.scroll.destroy(),this.offClickOutside(),this.$el.find(".js-dropdown-toggle").off("click"),this.$wrap.off("click")}}]),t}();$.fn.tvDropdown=(0,r.createTvBlockWithInstance)("tv-dropdown",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new l(t,e)}))},"8Wzo":function(t,e,i){"use strict";var n;i.r(e),i.d(e,"StopType",(function(){return n})),function(t){t[t.StopLoss=0]="StopLoss",t[t.TrailingStop=1]="TrailingStop"}(n||(n={}))},"8wgr":function(t,e,i){"use strict";i.r(e),i.d(e,"settingsKeys",(function(){return n}));var n={ACTIVE_BROKER:"trading.active_broker",FILTER_BROKER:"trading.filter_brokers_by_locale",PROPERTIES:"trading.chart.proterty",QTY:"trading.qty.",BROKERS_QTY:"trading.brokers.qty",PROFIT_VIEW_TYPE:"trading.dom.profitViewType",ORDER_WIDGET_MODE:"trading.orderWidgetMode.",TAKE_PROFIT:"trading.takeprofit.",STOP_LOSS:"trading.stoploss.",ORDER_DURATION:"trading.orderDuration.",TRADING_PANEL_OPENED:"trading.tradingPanelOpened",TRADING_PANEL_ACTIVE_PAGE:"trading.tradingPanelActivePage",PANEL_WIDTH:"trading.panelWidth",PANEL_HEIGHT:"trading.panelHeight",ORDER_PANEL_SETTINGS:"trading.orderPanelSettings",FAVORITE_BROKERS:"trading.panelFavorite",REVIEW_DIALOG_WAS_SHOWED:"trading.reviewDialogShowedOnLogin",SHOW_TOOLTIP_FOR_SELECT_BROKER:"trading.showTooltipForSelectBroker",LOGIN_COUNTER:"trading.brokerLogInCounter",LOGOUT_COUNTER:"trading.brokerLogOutCounter"}},CRS4:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M0 46l35-35 14 14-35 35H0zM39 7l6-6c5-5 19 9 14 14l-6 6z"/></svg>'},EgWA:function(t,e,i){"use strict";i.r(e),i.d(e,"notificationColumns",(function(){return n}));i("YFKU");var n=[{label:$.t("Time"),property:"time",formatter:"localDate",className:"tv-data-table__cell--text tv-data-table__cell--text-nowrap"},{label:$.t("Title"),property:"title",className:"tv-data-table__cell--text tv-data-table__cell--text-nowrap"},{label:$.t("Text"),property:"text",className:"tv-data-table__cell--text"}]},JrVa:function(t,e,i){t.exports={accountName:"accountName-1OIEYY_Y"}},LoC4:function(t,e,i){"use strict";i.r(e);var n=i("mrSG"),r=i("OKnH"),s=i("vFOx"),o=i("xZ9U"),a=function(t){function e(e,i,n){
var r=t.call(this,e,i,n)||this;return n.forEach((function(t){return t.table().addFormatters(i.formatters.concat(o.formatters))})),r}return Object(n.__extends)(e,t),e}(s.TablePage),l=i("Sweg");i.d(e,"SingleTablePage",(function(){return c}));var c=function(t){function e(e){var i,n=$("<div>"),s={id:e.id,idProperty:"id"},o=new l.Table(n,e.columns,s,e.priceFormatterFn),a=new r.a(o,e.source,e.subscriptions),c={id:e.id,name:e.title,headerCounter:!1,formatters:e.formatters};return i=t.call(this,n,c,[a])||this,a.start(),i}return Object(n.__extends)(e,t),e}(a)},OKnH:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("Eyy1"),r=i("b5Gw"),s=function(){function t(t,e,i,n){this._active=!1,this._created=!1,this._started=!1,this._fullUpdateDelegate=null,this._partialUpdateDelegate=null,this._deleteUpdateDelegate=null,this._noMoreEntries=!1,this._fullUpdateCancel=null,this._table=t,this._source=e,this._subscriptions=i,this._supportPagination=Boolean(n)}return t.prototype.start=function(){this._started||(this._subscribeUpdates(),this._started=!0)},t.prototype.stop=function(){this._started&&(this._unsubscribeUpdates(),this.reset(),this._started=!1)},t.prototype.isStarted=function(){return this._started},t.prototype.setActive=function(t){Object(n.assert)(!t||this._started,"Should be started first"),this._active!==t&&(this._active=t,this._active&&!this._created&&this._fullUpdate(),this._table.setActive(t))},t.prototype.isActive=function(){return this._active},t.prototype.reset=function(){this._active?this._fullUpdate():(this._deleteRows(),this._created=!1)},t.prototype.destroy=function(){this._unsubscribeUpdates(),this._table.destroy()},t.prototype.table=function(){return this._table},t.prototype._update=function(t){return!!this._created&&(this._table.addRow(t),!0)},t.prototype._deleteRow=function(t){this._created&&this._table.deleteRow(t)},t.prototype._deleteRows=function(){this._table.deleteRows(),this._created=!1},t.prototype._fullUpdate=function(){var t=this;if(this._deleteRows(),this._noMoreEntries=!1,!this._active)return Promise.resolve();this._fullUpdateCancel&&this._fullUpdateCancel();var e=Object(r.makeCancelable)(this._source());return this._fullUpdateCancel=e.cancel,e.promise.then((function(e){t._fullUpdateCancel=null,t._table.addRows(e),t._created=!0,t._onCreated()})).catch((function(t){if(!Object(r.isCancelled)(t))throw t}))},t.prototype._onCreated=function(){},t.prototype._loadMoreIfBottomVisible=function(t){var e=this;if(!this._noMoreEntries){var i=this._table.rowsCount();if(t&&t.to===i-1){var n=this._table.rowIdByIndex(i-1);this._source(n).then((function(t){0!==t.length?e._table.addRows(t):e._noMoreEntries=!0}))}}},t.prototype._subscribeUpdates=function(){if(this._fullUpdateDelegate)throw new Error("should unsubscribe first");this._fullUpdateDelegate=this._subscriptions.fullUpdateDelegate,this._fullUpdateDelegate.subscribe(this,this._fullUpdate),this._partialUpdateDelegate=this._subscriptions.rowUpdateDelegate,this._partialUpdateDelegate.subscribe(this,this._update),
this._supportPagination&&this._table.visibleRangeChanged.subscribe(this,this._loadMoreIfBottomVisible),this._subscriptions.rowDeleteDelegate&&(this._deleteUpdateDelegate=this._subscriptions.rowDeleteDelegate,this._deleteUpdateDelegate.subscribe(this,this._deleteRow))},t.prototype._unsubscribeUpdates=function(){this._fullUpdateDelegate&&(this._fullUpdateDelegate.unsubscribe(this,this._fullUpdate),delete this._fullUpdateDelegate),this._partialUpdateDelegate&&(this._partialUpdateDelegate.unsubscribe(this,this._update),delete this._partialUpdateDelegate),this._deleteUpdateDelegate&&(this._deleteUpdateDelegate.unsubscribe(this,this._deleteRow),delete this._deleteUpdateDelegate),this._table.visibleRangeChanged.unsubscribe(this,this._loadMoreIfBottomVisible)},t}()},PGTi:function(t,e,i){},Sweg:function(t,e,i){"use strict";i.r(e),function(t){i.d(e,"Table",(function(){return m}));i("P5fv"),i("TdlR");var n=i("txPx"),r=i("kcTO"),s=i("UX5W"),o=i("Vdly"),a=i("aIyQ"),l=i.n(a),c=(i("QwKQ"),i("7XZl"),i("040A")),u=i("aLUT"),d=i("Eyy1"),h=i("Ialn"),p=(i("v9OY"),Object(n.getLogger)("Table")),_='<div class="tv-dropdown tv-dropdown--inline tv-dropdown-behavior tv-data-table__dropdown-button-wrap js-init-switcher"><div class="tv-dropdown-behavior__button apply-common-tooltip js-dropdown-toggle" title="'+$.t("Column setup")+'">'+c+"</div></div>",f='<div class="tv-dropdown-behavior__scroll"><div class="tv-dropdown-behavior__inscroll">{{#columns}}{{^isAlwaysVisible}}<div class="tv-dropdown-behavior__item js-column-item"><label data-field="{{property}}" class="tv-control-select__option-wrap js-fields-item"><label class="tv-control-checkbox"><input type="checkbox" name="{{property}}" class="js-field-checkbox tv-control-checkbox__input i-inited" {{#isVisible}}checked{{/isVisible}}><span class="tv-control-checkbox__box ">'+u+'</span><span class="tv-control-checkbox__ripple js-ripple"></span></label><span class="tv-control-checkbox__label tv-data-table__dropdown-label--breakable js-checkbox-label">{{label}}</span></label></div>{{/isAlwaysVisible}}{{/columns}}</div></div>',b='<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>';function v(t,e){return t<e?1:t>e?-1:0}function g(t){return t||""}var m=function(){function e(t,e,i,n){var s=this;this.visibleRangeChanged=new l.a,this._data=[],this._dataIndicesCache={},this._delayedUpdateInterval=null,this._updateVisibleRowsTimeout=null,this._option=i||{},this._priceFormatterFn=n,this._columns=e,this._visibleColumns=this._createVisibleStore(this._option.id),this._idx=o.getInt(this._option.id+".sort._idx",this._option.idx||0),this._asc=o.getBool(this._option.id+".sort._asc",this._option.asc||!1),this._formatters={},this._group=this._option.group,this._defaultPriceFormatter=new r.PriceFormatter,this._cleanHead(),this._toggleVisibleSwitcher=$('<div><div class="tv-data-table__dropdown-button tv-data-table__dropdown-button-cross-align js-dropdown-button"></div></div>'),this._idProperty=g(this._option.idProperty||e[0].property)
;var a=this._renderTable('<table class="tv-data-table {{className}}"><thead class="tv-data-table__thead"><tr class="tv-data-table__stroke">{{#columns}}<th class="tv-data-table__cell tv-data-table__cell--bold {{className}}"><span class="tv-data-table__cell-text{{^notSortable}} tv-data-table__sortable{{/notSortable}}{{#help}} apply-common-tooltip{{/help}}{{#htmlHelp}} common-tooltip-html{{/htmlHelp}}" {{#help}}title="{{help}}"{{/help}}>{{{label}}}</span></th>{{/columns}}</tr></thead>{{#bodies}}<tbody class="tv-data-table__tbody {{className}}">{{#strokes}}<tr class="tv-data-table__stroke">{{#cells}}<td class="tv-data-table__cell {{className}}"{{#colspan}}colspan="{{colspan}}"{{/colspan}}>{{#contain}}{{{contain}}}{{/contain}}</td>{{/cells}}</tr>{{/strokes}}</tbody>{{/bodies}}</table>',g(this._option.className));$(a).appendTo(t),this._head=this._option.className?$(t).find("."+this._option.className+" thead"):$(t).find("thead"),this._body=this._option.className?$(t).find("."+this._option.className+" tbody"):$(t).find("tbody"),this._initSwitcher();var c=this._head.find("tr").children();this._columns.forEach((function(t,e){var i=c[e];s._isCellHidden(e)&&$(i).addClass("i-hidden");for(var n=i.querySelectorAll(".tv-data-table__sortable"),r=function(t){var i=n[t];i.addEventListener("click",(function(t){t.preventDefault(),s._head.find(".tv-data-table__sortable--asc, .tv-data-table__sortable--desc").removeClass("tv-data-table__sortable--asc tv-data-table__sortable--desc"),s._idx===e?s._asc=!s._asc:(s._idx=e,s._asc=!1),i.classList.add(s._asc?"tv-data-table__sortable--asc":"tv-data-table__sortable--desc"),o.setValue(s._option.id+".sort._idx",s._idx),o.setValue(s._option.id+".sort._asc",s._asc),s._sortViewImpl()}))},a=0;a<n.length;a++)r(a)})),this._head.find("th:eq("+this._idx+") .tv-data-table__sortable").addClass(this._asc?"tv-data-table__sortable--asc":"tv-data-table__sortable--desc"),this._sortTimeout=null,this._visibleRange=null,this._delayedData={},this._active=!1}return e.prototype.setActive=function(t){this._active!==t&&(this._active=t,this._updateVisibleRows())},e.prototype.destroy=function(){this._sortTimeout&&clearTimeout(this._sortTimeout),this._delayedUpdateInterval&&clearInterval(this._delayedUpdateInterval),this._updateVisibleRowsTimeout&&clearTimeout(this._updateVisibleRowsTimeout)},e.prototype.addRow=function(e,i){var n=this;void 0===i&&(i=!0);var r=e[this._idProperty],s=this._findIndexById(r);if(-1===s){var o,a=0;if(i)for(var l=this._data.length-1;l>=0;l--)-1===this._compare(e,this._data[l])&&(o=this._data[l],a=l);var c=t.render('<tr class="tv-data-table__stroke {{rowClassName}}">{{#columns}}<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>{{/columns}}</tr>',{rowClassName:e.type?"tv-data-table__stroke--hl tv-data-table__stroke--hl-"+e.type:""}),u=Object.assign({$row:$(c)},e);void 0===u.priceFormatter&&this._resolveFormatter(u);var d=u.priceFormatter||this._defaultPriceFormatter;this._columns.forEach((function(e,i){var r=$(t.render(b,{contain:""}))
;r[0].className+=" "+e.className;var s=(e.formatter&&n._formatters[e.formatter]?n._formatters[e.formatter]:n._extractValue)({value:e.property?u[e.property]:u,priceFormatter:d,row:u,$container:r});e.fixedWidth&&(s=$('<span class="js-fixedwidth inlined">').append(s)),"object"==typeof s?n._append(r,s):r.append(s),n._isCellHidden(i)&&r.addClass("i-hidden"),n._append(u.$row,r)})),o?(this._data.splice(a,0,u),u.$row.insertBefore(o.$row)):(this._data.push(u),u.$row.appendTo(this._body)),this._clearDataIndicesCache(),this.updateVisibleContent()}else this._scheduleUpdateRow(s,e)},e.prototype.updateRowById=function(t,e){var i=this._findIndexById(t);if(-1!==i){var n=this._delayedData[t]||this._data[i];this._scheduleUpdateRow(i,Object.assign({},n,e))}else p.logWarn("Id "+t+" not found")},e.prototype.addRows=function(t){var e=this;t.forEach((function(t){return e.addRow(t,!1)})),this._sortViewImpl()},e.prototype.deleteRow=function(t){var e=this._findIndexById(t),i=this._data[e];-1!==e&&(i.$row.remove(),this._data.splice(e,1),this.updateVisibleContent()),delete this._delayedData[t],this._clearDataIndicesCache()},e.prototype.updateVisibleContent=function(){var t=this;this._updateVisibleRowsTimeout&&clearTimeout(this._updateVisibleRowsTimeout);this._updateVisibleRowsTimeout=setTimeout((function(){return t._updateVisibleRows()}),100)},e.prototype.deleteRows=function(){this._removeAllChildren(this._body[0]),this._data=[],this._clearDataIndicesCache(),this._delayedData={},this._updateVisibleRows()},e.prototype.highlightRowById=function(t){var e=this._rowElementById(t);e&&e.highlight(2)},e.prototype.setRowActiveById=function(t,e){var i=this.rowById(t);i&&this._setRowActive(i,e)},e.prototype.setRowActiveByFilter=function(t){var e=this;this._data.forEach((function(i){return e._setRowActive(i,t(i))}))},e.prototype.addFormatter=function(t,e){this._formatters[t]=e},e.prototype.addFormatters=function(t){var e=this;t.forEach((function(t){return e.addFormatter(t.name,t.format)}))},e.prototype.isRowInViewport=function(t){if(!this._active)return!1;if(this._updateVisibleRowsTimeout&&this._updateVisibleRows(),!this._visibleRange)return!0;var e=this._findIndexById(t);return e>=this._visibleRange.from&&e<=this._visibleRange.to},e.prototype.setColumnAvailable=function(t,e){try{this._visibleColumns[this._getColumnIdx(t)].forceInvisible=!e,this._applyColumnVisibility(t)}catch(i){p.logWarn("Column "+t+" not found")}},e.prototype.setRowLinkedByFilter=function(t){var e=this;this._data.forEach((function(i){return e._setRowLinked(i,t(i))}))},e.prototype.setRowLinkedById=function(t,e){var i=this.rowById(t);i&&this._setRowLinked(i,e)},e.prototype.rowById=function(t){var e=this._findIndexById(t);if(-1!==e)return this._data[e]},e.prototype.rowIdAtEvent=function(t){var e=$(t.srcElement||t.target).parents().andSelf(),i=this._data.find((function(t){return e.is(t.$row)}));if(i)return i[this._idProperty]},e.prototype.rowsCount=function(){return this._data.length},e.prototype.rowIdByIndex=function(t){
if(t<0||t>this.rowsCount()-1)throw new Error("No table entry for such index");return this._data[t][this._idProperty]},e.prototype._setRowLinked=function(t,e){t&&t.isRowLinked!==e&&(t.isRowLinked=e,t.$row[0].classList.toggle("tv-data-table__stroke--hl",e),t.$row[0].classList.toggle("tv-data-table__stroke--hl-active",e))},e.prototype._setRowActive=function(t,e){t&&t.isRowActive!==e&&(t.isRowActive=e,this._applyRowActivityToElement(t.$row,!!t.isRowActive))},e.prototype._append=function(t,e){t[0].appendChild(e[0])},e.prototype._resolveFormatter=function(t){var e=this;this._priceFormatterFn&&this._priceFormatterFn(t).then((function(i){var n=e._findIndexById(t[e._idProperty]);-1!==n&&(e._data[n].priceFormatter=i,e._updateRow(Object.assign({},e._data[n]),n,!0))})).catch((function(){}))},e.prototype._updateVisibleRows=function(){this._updateVisibleRowsTimeout&&(clearTimeout(this._updateVisibleRowsTimeout),delete this._updateVisibleRowsTimeout);var t=this._visibleRange;0!==this._data.length&&this._active?this._visibleRange=Object(s.a)(this._visibleRange,this._data):this._visibleRange=null,(!!t!=!!this._visibleRange||this._visibleRange&&(this._visibleRange.from!==Object(d.ensure)(t).from||this._visibleRange.to!==Object(d.ensure)(t).to))&&(p.logDebug(this._option.id+" visible rows changed. Previous: from "+(t&&t.from)+", to "+(t&&t.to)+". New: from "+(this._visibleRange&&this._visibleRange.from)+", to "+(this._visibleRange&&this._visibleRange.to)+"."),this._forceUpdateDelayedData(this._visibleRange),this.visibleRangeChanged.fire(this._visibleRange))},e.prototype._removeAllChildren=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype._scheduleUpdateRow=function(t,e){var i=this;this._visibleRange&&t>=this._visibleRange.from-1&&t<=this._visibleRange.to+1?this._updateRow(e,t):(this._delayedData[e[this._idProperty]]=e,this._delayedUpdateInterval||(this._delayedUpdateInterval=setInterval((function(){return i._forceUpdateDelayedData(null,20)}),5e3)))},e.prototype._forceUpdateDelayedData=function(t,e){for(var i=0,n=0,r=Object.keys(this._delayedData);n<r.length;n++){var s=r[n],o=this._delayedData[s],a=this._findIndexById(o[this._idProperty]);if(-1!==a?(!t||a>=t.from-1&&a<=t.to+1)&&(this._updateRow(o,a),delete this._delayedData[s],i++):p.logWarn("Row has been removed"),e&&i===e)break}!this._delayedUpdateInterval||e&&0!==Object.keys(this._delayedData).length||(clearInterval(this._delayedUpdateInterval),delete this._delayedUpdateInterval)},e.prototype._updateRow=function(e,i,n){var r=this;if(void 0===n&&(n=!1),void 0===i||-1===i)throw Error("row not exist");var s=this._data[i],o=!!this._group&&this._group(s)!==this._group(e),a=s.priceFormatter||this._defaultPriceFormatter,l=$.extend({},s);this._columns.forEach((function(i,c){var u=g(i.modificationProperty||i.property);if(n||u&&l[u]!==e[u]){c===r._idx&&(o=!0);var d=s[u];s[u]=e[u];var h=s.$row.find("td:eq("+c+")"),p=r._elementFormatterForColumn(i),_=i.property?s[i.property]:s,f=$(t.render(b,{contain:""}));f[0].className+=" "+i.className;var v=p({value:_,priceFormatter:a,
row:e,prevValue:i.highlightDiff?d:null,$container:f});i.fixedWidth&&(v=$("<span>").addClass("js-fixedwidth tv-data-table__cell--inlined").css("min-width",h.find(".js-fixedwidth").width()).append(v)),r._isCellHidden(c)&&f.addClass("i-hidden"),"object"==typeof v&&1===v.length?r._append(f,v):f.append(v),f.insertBefore(h),h.remove()}})),o&&this._sortView(),delete e.$row,Object.assign(s,e)},e.prototype._elementFormatterForColumn=function(t){return t.formatter&&this._formatters[t.formatter]?this._formatters[t.formatter]:this._extractValue},e.prototype._rowElementById=function(t){var e=this.rowById(t);return e&&e.$row},e.prototype._compare=function(t,e){var i=g(this._columns[this._idx].sortProp||this._columns[this._idx].property),n=g(t[i]),r=g(e[i]),s=0;this._hasGroups()&&(s=v(this._group(t),this._group(e)));if(s||(s=t.isTotalRow?1:e.isTotalRow?-1:0),s||(s=v(n,r),this._asc&&(s=-s)),!s){var o=g(this._columns[0].sortProp||this._columns[0].property);s=v(n=g(t[o]),r=g(e[o]))}return s},e.prototype._hasGroups=function(){return"function"==typeof this._group},e.prototype._sortViewImpl=function(){this._data.sort(this._compare.bind(this));for(var t=null,e=this._data.length-1;e>=0;e--){var i=this._data[e].$row[0];t&&t.parentNode&&t.parentNode.insertBefore(i,t),t=i}this._clearDataIndicesCache()},e.prototype._sortView=function(){var t=this;this._sortTimeout||(this._sortTimeout=setTimeout((function(){t._sortViewImpl(),t._sortTimeout=null}),1e3))},e.prototype._applyRowActivityToElement=function(t,e){t.toggleClass("tv-data-table__stroke--grayed",e)},e.prototype._cleanHead=function(){var t=this._columns.length-1,e=this._columns[t];-1!==e.label.toLowerCase().indexOf("dropdown")&&(e.label="")},e.prototype._renderTable=function(e,i){var n=this._columns.length-1,r=this._columns[n];return""===r.label?(r.label=this._toggleVisibleSwitcher.html(),this._visibleColumns[n].isAlwaysVisible=!0):(this._columns.push({label:this._toggleVisibleSwitcher.html(),className:"tv-data-table__cell--buttons-cell",notSortable:!0,fixedWidth:!1,property:"dropdown",formatter:""}),this._visibleColumns.push({isVisible:!0,isAlwaysVisible:!0,property:g(r.property),label:""})),t.render(e,{columns:this._columns,className:"tv-data-table--trading-cqg "+i,bodies:[{className:""}]})},e.prototype._initSwitcher=function(){var e,i,n=this,r=$(t.render(f,{columns:this._visibleColumns})),s=$('<div class="tv-dropdown__body tv-dropdown-behavior__body tv-data-table__dropdown-wrap i-hidden"></div>'),o=$(_),a=null,l=null,c=(e=this._visibleColumns.length,i=this._visibleColumns.filter((function(t){return t.isAlwaysVisible})).length,e-i>7);if(r.appendTo(s),s.appendTo(o),c){var u=$('<div class="tv-data-table__dropdown-search-wrap">').prependTo(s);a=$('<input type="text" placeholder='+$.t("Search")+' class="tv-data-table__dropdown-search-input">').appendTo(u),l=$('<div class="tv-control-select__option-wrap tv-data-table__search-no-matches js-hidden">'+$.t("No matches")+"</div>").appendTo(s),this._initSearchInput(s,r,o,a,l,c)}this._initDropdown(r,s,o,a,c),
c&&a&&this._handleDropdownClosed(r,s,o,c,a,Object(d.ensure)(l)),o.on("change",".js-fields-item",(function(t){n._handleChecked($(t.currentTarget),r)}));var h=this._head.find(".js-dropdown-button");o.appendTo(h),this._countAndSetPosition(s,o),this._countAndSetHeight(r,s,o,c)},e.prototype._handleChecked=function(t,e){var i=t.data("field"),n=!t.find(".js-field-checkbox")[0].checked,r=this._getColumnIdx(i);n?this._hideColumn(r):this._showColumn(r),e.find(":checked").prop("disabled",this._isLastColumnVisible())},e.prototype._handleDropdownClosed=function(t,e,i,n,r,s){var o=this;i.on("afterCloseMenu",(function(){if(""!==r.val()){var a=38*t.find(".js-column-item").size();r.val(""),t.find(".js-column-item").toggleClass("js-hidden",!1),s.toggleClass("js-hidden",!0),t.toggleClass("js-hidden",!1),t.css("height",a+"px"),o._countAndSetHeight(t,e,i,n)}}))},e.prototype._initDropdown=function(t,e,i,n,r){var s=this;i.tvDropdown(i,{scroll:!0}).on("beforeOpenMenu",(function(){s._countAndSetPosition(e,i),s._countAndSetHeight(t,e,i,r),s._isLastColumnVisible()&&t.find(":checked").prop("disabled",!0)})),n&&i.on("afterOpenMenu",(function(){n.first().focus()}))},e.prototype._initSearchInput=function(t,e,i,n,r,s){var o=this;n.on("change input",(function(){var a=n.val().trim().toLowerCase(),l=e.find(".js-column-item");if(0!==a.length)for(var c=l.length,u=0;u<c;u++){var d=-1===$(l[u]).find(".js-checkbox-label").text().toLowerCase().indexOf(a);$(l[u]).toggleClass("js-hidden",d)}else l.removeClass("js-hidden");var h=e.find(".js-column-item:not(.js-hidden)").size(),p=!!h;r.toggleClass("js-hidden",p),p&&e.css("height",38*h+"px"),o._countAndSetHeight(e,t,i,s)}))},e.prototype._countAndSetHeight=function(t,e,i,n){var r=$(document.getElementsByClassName("js-table-container")[0]),s=r.height(),o=r.offset(),a=n?55:0,l=38*t.find(".js-column-item:not(.js-hidden)").size(),c=parseInt(e.css("top"))-(o?o.top:0);0<c?l>s-c?t.css("height",s-c-a-10+"px"):t.css("height",l+"px"):l>s-a-10?t.css("height",s-a-10+"px"):t.css("height",l+"px"),i.tvDropdown("updateScroll")},e.prototype._countAndSetPosition=function(t,e){var i=e[0].getBoundingClientRect(),n=t.width();t.css({left:Object(h.isRtl)()?i.left:i.left-n+37,right:"auto",top:i.top-25})},e.prototype._createVisibleStore=function(t){for(var e=[],i=this._columns.filter((function(t){return t.hideByDefault})).map((function(t){return t.property})),n=o.getJSON(t+".invisibleColumns",i),r=this._columns.length,s=0;s<r;s++){var a=this._columns[s],l=-1!==n.indexOf(a.property);e.push({isVisible:!l,isAlwaysVisible:!0===a.notHideable,property:g(a.property),label:a.label})}return e},e.prototype._toggleVisibleState=function(t,e){this._visibleColumns[this._getColumnIdx(t)].isVisible=e;o.setJSON(this._option.id+".invisibleColumns",this._visibleColumns.reduce((function(t,e){return e.isVisible||t.push(e.property),t}),[]))},e.prototype._showColumn=function(t){this._toggleVisibleState(this._visibleColumns[t].property,!0),this._applyColumnVisibility(this._visibleColumns[t].property)},e.prototype._isLastColumnVisible=function(){
return 1===this._visibleColumns.filter((function(t){return t.isVisible&&t.label&&t.property&&"dropdown"!==t.property})).length},e.prototype._hideColumn=function(t){this._toggleVisibleState(this._visibleColumns[t].property,!1),this._applyColumnVisibility(this._visibleColumns[t].property)},e.prototype._applyColumnVisibility=function(t){var e=this._getColumnIdx(t),i=this._head.find("th:eq("+e+")"),n=$("td:nth-child("+(e+1)+")",this._body),r=this._visibleColumns[e];(r.isVisible||r.isAlwaysVisible)&&!r.forceInvisible?(i.removeClass("i-hidden"),n.removeClass("i-hidden")):(i.addClass("i-hidden"),n.addClass("i-hidden"))},e.prototype._isCellHidden=function(t){var e=this._visibleColumns[t];return!e.isVisible||!!e.forceInvisible},e.prototype._getColumnIdx=function(t){for(var e=this._visibleColumns.length,i=0;i<e;i++)if(this._visibleColumns[i].property===t)return i;throw new Error("Unknown column")},e.prototype._extractValue=function(t){return t.value},e.prototype._findIndexById=function(t){var e=this._dataIndicesCache[t];if(void 0!==e)return e;var i=this._idProperty,n=this._data.findIndex((function(e){return e[i]===t}));return this._dataIndicesCache[t]=n,n},e.prototype._clearDataIndicesCache=function(){this._dataIndicesCache={}},e}()}.call(this,i("nbsC"))},T7KF:function(t,e,i){"use strict";i.r(e),i.d(e,"TitledTablesPage",(function(){return l}));var n=i("mrSG"),r=i("vFOx"),s=i("OKnH"),o=i("Sweg"),a=i("xZ9U"),l=function(t){function e(e){var i=$("<div>"),n=[];e.tables.forEach((function(t){var e=$("<div>"),r=new o.Table(e,t.columns,t.options,t.priceFormatterFn);t.title&&$('<h3 class="tv-data-table__header">').text(t.title).appendTo(i),e.appendTo(i);var l=new s.a(r,t.source,t.subscriptions,t.flags&&t.flags.supportPagination);n.push(l),r.addFormatters(t.formatters.concat(a.formatters)),l.start()}));var r={id:e.id,name:e.title,headerCounter:!1};return t.call(this,i,r,n)||this}return Object(n.__extends)(e,t),e}(r.TablePage)},TkT6:function(t,e,i){},UX5W:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));i("P5fv");var n=i("Y7w9"),r=i("lt86"),s=i.n(r),o=function(t){return t&&s.a.isVisible(t.$row)};function a(t,e){return!o(t)}function l(t,e){return!o(e)}function c(t,e){if(t){if(o(e[t.from]))return t.from;if(o(e[t.to]))return t.to}return function t(e,i,n){if(n<i)return NaN;var r=i+(n-i+1>>1);if(o(e[r]))return r;var s=t(e,i,r-1);return isNaN(s)?t(e,r+1,n):s}(e,0,e.length-1)}function u(t,e){var i=c(t,e);if(isNaN(i))return null;var r=Object(n.lowerbound)(e,1,a,0,i+1),s=Object(n.upperbound)(e,1,l,i+1,e.length)-1;return isNaN(r)||isNaN(s)?null:{from:Math.max(0,r),to:Math.min(s,e.length-1)}}},"Un+5":function(t,e,i){"use strict";i.r(e),i.d(e,"AccountDropdown",(function(){return d}));var n=i("q1tI"),r=i.n(n),s=i("Eyy1"),o=i("82wv"),a=i("Iksw"),l=i("N5tr"),c=i("j6HJ"),u=i("JrVa");function d(t){var e=Object(n.useState)(t.account),i=e[0],d=e[1];return Object(n.useEffect)((function(){function e(e){d(Object(s.ensureDefined)(t.accountsList.find((function(t){return t.id===e}))).name)}return t.currentAccountUpdate.subscribe(null,e),function(){
t.currentAccountUpdate.unsubscribe(null,e)}}),[t.currentAccountUpdate,t.accountsList]),r.a.createElement(o.b,{content:r.a.createElement("span",{className:c.label},i),className:c.elem,horizontalAttachEdge:a.a.Right,horizontalDropDirection:a.b.FromRightToLeft},t.accountsList.map((function(e){var i=r.a.createElement("div",{className:t.className},r.a.createElement("div",{className:u.accountName},e.name),r.a.createElement("div",null,e.currency));return r.a.createElement(l.b,{label:i,onClick:function(){e.callBack()},key:e.name})})))}},UpRv:function(t,e,i){"use strict";i.r(e),function(t){i.d(e,"PositionPage",(function(){return y}));var n=i("mrSG"),r=i("xZ9U"),s=i("0sbS"),o=i("N22A"),a=i("pIOw"),l=i("aIyQ"),c=i.n(l),u=i("Sweg"),d=i("Eyy1"),h=i("vFOx"),p=i("yB0V"),_=i("4qhP"),f=(i("YFKU"),i("Vdly")),b=i("JOqt"),v=function(){function t(t,e,i){this._totalCount=0,this._recalcCountsDelayed=Object(b.debounce)(this._recalcCounts.bind(this),100),this._source=t,this._rowUpdateDelegate=e,this._fullUpdateDelegate=i,this.countChanged=new c.a}return t.prototype.start=function(){this._rowUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._recalcCounts()},t.prototype.stop=function(){this._rowUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed)},t.prototype._recalcCounts=function(){var t=this;this._source().then((function(e){var i=e.filter((function(t){return Object(_.isPositionActive)(t)}));t._totalCount!==i.length&&(t._totalCount=i.length,t.countChanged.fire(t._totalCount))}))},t}();function g(t,e,i,n,r,s){var o={id:t,className:"positions",idProperty:"id"},a=new u.Table(e,r,o,s);return new m(a,i,n)}var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.__extends)(e,t),e.prototype._update=function(e){return!!t.prototype._update.call(this,e)&&(Object(_.isPositionActive)(e)||this._deleteRow(e.id),!0)},e}(p.LinkingTableController),y=function(e){function i(t){var i=this,n=$("<div>"),o={id:"positions",name:window.t("Positions"),headerCounter:!0},a=$("<div>"),l=g(t.brokerId+".positions",a,t.positions.source,Object.assign({},t.positions.subscriptions,{fullUpdateDelegate:t.fullUpdateDelegate}),t.positions.columns,t.priceFormatterFn);n.append(a);var c=[l],u=null,h=null;t.trades&&(u=$("<div>"),h=g(t.brokerId+".trades",u,t.trades.source,Object.assign({},t.trades.subscriptions,{fullUpdateDelegate:t.fullUpdateDelegate}),t.trades.columns,t.priceFormatterFn),n.append(u),c.push(h)),(i=e.call(this,n,o,c)||this)._$positionsTableContainer=a,i._$tradesTableContainer=u,i._positionsTable=l,i._tradesTable=h;var p=t.formatters||[];i._fullUpdateDelegate=t.fullUpdateDelegate,i._posSubscriptions=t.positions.subscriptions,i._checkSupportTrades=t.checkSupportTrades,i._storeFunctions(t);var _={name:"posSettings",format:function(t){var e=i._closePositionFn?i._closePositionFn.bind(null,t.row.id):null,n=i._editPositionFn?i._editPositionFn.bind(null,t.row.id):null
;return $(Object(s.getSettingsButtons)(e,window.t("Close",{context:"position"}),n,window.t("Protect Position..."),t.row.message))}};if(l.table().addFormatters([_].concat(r.formatters).concat(p)),t.trades){var b={name:"tradeSettings",format:function(t){var e=i._closeTradeFn&&t.row.canBeClosed?i._closeTradeFn.bind(null,t.row.id):null,n=i._editTradeFn?i._editTradeFn.bind(null,t.row.id):null;return $(Object(s.getSettingsButtons)(e,window.t("Close",{context:"position"}),n,window.t("Protect Position...")))}};Object(d.ensure)(h).table().addFormatters([b].concat(r.formatters).concat(p)),i._tradesCounter=new v(t.trades.source,t.trades.subscriptions.countUpdateDelegate,i._fullUpdateDelegate)}else i._tradesCounter=null;i._positionsCounter=new v(t.positions.source,i._posSubscriptions.countUpdateDelegate,i._fullUpdateDelegate),i._constructFilter(),i._checkShowFilter(),i._subscribeUpdates();var m=f.getInt("Trading.PositionsTable.Filter",0),y=i._checkSupportTrades()?m:1;return i._filterTabs.setActivePage(y),i._selectPage(y),i}return Object(n.__extends)(i,e),i.prototype.contextItems=function(t){var e=this._activeTableController().table(),i=e.rowIdAtEvent(t);if(!i)return[];var n=Object(d.ensureDefined)(e.rowById(i)),r=[];return 0===this._filterTabs.index()?(this._editTradeFn&&r.push({text:window.t("Protect Position..."),action:this._editTradeFn.bind(null,i)}),this._closeTradeFn&&n.canBeClosed&&r.push({text:window.t("Close Position"),action:this._closeTradeFn.bind(null,i)})):(this._editPositionFn&&r.push({text:window.t("Protect Position..."),action:this._editPositionFn.bind(null,i)}),this._closePositionFn&&r.push({text:window.t("Close Position"),action:this._closePositionFn.bind(null,i)}),this._reversePositionFn&&r.push({text:window.t("Reverse Position"),action:this._reversePositionFn.bind(null,i)})),r},i.prototype.topline=function(){return this._filter},i.prototype.destroy=function(){this._unsubscribeUpdates(),e.prototype.destroy.call(this)},i.prototype._onActiveChanged=function(t){t?this._activeTableController().setActive(!0):(this._positionsTable.setActive(!1),this._tradesTable&&this._tradesTable.setActive(!1))},i.prototype._onPositionsCountChanged=function(t){this._setCount(t),this._setTabCount(1,t)},i.prototype._onTradesCountChanged=function(t){this._setTabCount(0,t)},i.prototype._setTabCount=function(t,e){this._filter.find(".counter .counter__count")[t].innerHTML=String(e)},i.prototype._activeTableController=function(){return this._checkSupportTrades()&&0===this._filterTabs.index()?Object(d.ensure)(this._tradesTable):this._positionsTable},i.prototype._subscribeUpdates=function(){this._positionsCounter.start(),this._positionsCounter.countChanged.subscribe(this,this._onPositionsCountChanged),this._tradesCounter&&(this._tradesCounter.start(),this._tradesCounter.countChanged.subscribe(this,this._onTradesCountChanged)),this._filterTabs.tabChanged.subscribe(this,this._selectPage),this._fullUpdateDelegate.subscribe(this,this._checkShowFilter)},i.prototype._unsubscribeUpdates=function(){this._positionsCounter.stop(),
this._positionsCounter.countChanged.unsubscribe(this,this._onPositionsCountChanged),this._tradesCounter&&(this._tradesCounter.stop(),this._tradesCounter.countChanged.unsubscribe(this,this._onTradesCountChanged)),this._filterTabs.tabChanged.unsubscribe(this,this._selectPage),this._fullUpdateDelegate.unsubscribe(this,this._checkShowFilter)},i.prototype._constructFilter=function(){this._filter=$(t.render('\n\t<div>\n\t\t<div class="tv-tabs tv-tabs--no-border tv-tabs--secondary-active tv-tabs--no-margin tv-tabs--semi-compact js-filter-wrapper">\n\t\t\t{{#filter}}\n\t\t\t\t<div class="tv-tabs__tab {{id}}">\n\t\t\t\t\t<div class="tv-tabs__wrap">\n\t\t\t\t\t\t<div class="counter">\n\t\t\t\t\t\t\t<div class="counter__text">{{name}}</div>\n\t\t\t\t\t\t\t<div class="counter__count counter__count--{{id}}">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{{/filter}}\n\t\t</div>\n\t</div>',{filter:[{id:"type-individual",name:window.t("Individual Positions")},{id:"type-net",name:window.t("Net Positions")}]})),this._filterTabs=new a.Tabs(this._filter.find(".js-filter-wrapper").get(0),void 0,{noSlider:!0})},i.prototype._checkShowFilter=function(){var t=this._filter.find(".js-filter-wrapper");this._checkSupportTrades()?t.removeClass("js-hidden"):(t.addClass("js-hidden"),this._tradesTable&&this._tradesTable.stop())},i.prototype._selectPage=function(t){var e=1===t;e?this._positionsTable.start():this._tradesTable&&this._tradesTable.start(),this._$positionsTableContainer.toggleClass("js-hidden",!e),this._$tradesTableContainer&&this._$tradesTableContainer.toggleClass("js-hidden",e),this._positionsTable.setActive(e),this._tradesTable&&this._tradesTable.setActive(!e),f.setValue("Trading.PositionsTable.Filter",t)},i.prototype._storeFunctions=function(t){var e=Object(d.ensure)(Object(o.tradingService)()),i="Positions Page",n=t.positions.closeFn;this._closePositionFn=n?function(t){return e.trackEvent(i,"Close Position"),n(t)}:null;var r=t.positions.editFn;this._editPositionFn=r?function(t){return e.trackEvent(i,"Edit Position"),r(t)}:null;var s=t.positions.reverseFn;this._reversePositionFn=s?function(t){return e.trackEvent(i,"Reverse Position"),s(t)}:null;var a=t.trades;if(a){var l=a.closeFn;this._closeTradeFn=l?function(t){return e.trackEvent(i,"Close Trade"),l(t)}:null;var c=a.editFn;this._editTradeFn=c?function(t){return e.trackEvent(i,"Edit Trade"),c(t)}:null}},i}(h.TablePage)}.call(this,i("nbsC"))},Xxuz:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentcolor" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.5c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5V7.05l.4.09c.9.18 1.73.53 2.46 1.02l.34.23.29-.3.81-.8c.2-.2.52-.2.71 0l.7.7.36-.35-.35.35c.2.2.2.51 0 .7l-.82.82-.29.29.23.34c.49.73.84 1.57 1.02 2.46l.08.4H22.5c.28 0 .5.22.5.5v1a.5.5 0 0 1-.5.5H20.95l-.09.4c-.18.9-.53 1.73-1.02 2.46l-.23.34.3.29.8.81c.2.2.2.52 0 .71l-.7.7a.5.5 0 0 1-.7 0l-.82-.8-.29-.3-.34.23c-.73.49-1.57.84-2.46 1.02l-.4.08V22.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5V20.95l-.4-.09a6.96 6.96 0 0 1-2.46-1.02l-.34-.23-.29.3-.81.8.35.36-.35-.35a.5.5 0 0 1-.71 0l-.7-.71a.5.5 0 0 1 0-.7l-.36-.36.35.35.82-.81.29-.29-.23-.34a6.96 6.96 0 0 1-1.02-2.46l-.08-.4H5.5a.5.5 0 0 1-.5-.5v-1c0-.28.22-.5.5-.5H7.05l.09-.4c.18-.9.53-1.73 1.02-2.46l.23-.34-.3-.29-.8-.81a.5.5 0 0 1 0-.71l.7-.7c.2-.2.51-.2.7 0l.82.8.29.3.34-.23a6.96 6.96 0 0 1 2.46-1.02l.4-.08V5.5zm.5-1.5c-.83 0-1.5.67-1.5 1.5v.75c-.73.2-1.43.48-2.06.86l-.54-.53a1.5 1.5 0 0 0-2.12 0l-.7.7a1.5 1.5 0 0 0 0 2.12l.53.54A7.95 7.95 0 0 0 6.25 12H5.5c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5h.75c.2.73.48 1.43.86 2.06l-.53.54a1.5 1.5 0 0 0 0 2.12l.7.7a1.5 1.5 0 0 0 2.12 0l.54-.53c.63.38 1.33.67 2.06.86v.75c0 .83.67 1.5 1.5 1.5h1c.83 0 1.5-.67 1.5-1.5v-.75a7.95 7.95 0 0 0 2.06-.86l.54.53a1.5 1.5 0 0 0 2.12 0l.7-.7a1.5 1.5 0 0 0 0-2.12l-.53-.54c.38-.63.67-1.33.86-2.06h.75c.83 0 1.5-.67 1.5-1.5v-1c0-.83-.67-1.5-1.5-1.5h-.75a7.95 7.95 0 0 0-.86-2.06l.53-.54a1.5 1.5 0 0 0 0-2.12l-.7-.7a1.5 1.5 0 0 0-2.12 0l-.54.53A7.95 7.95 0 0 0 16 6.25V5.5c0-.83-.67-1.5-1.5-1.5h-1zM12 14a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/></svg>'},drKH:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" width="9" height="9"><path fill="currentColor" d="M9 4.5A4.5 4.5 0 0 1 4.5 9 4.5 4.5 0 0 1 0 4.5 4.5 4.5 0 0 1 4.5 0 4.5 4.5 0 0 1 9 4.5z"/><path fill="#fff" d="M4.768 1.527c.131 0 .243.047.334.141a.444.444 0 0 1 .141.33.461.461 0 0 1-.14.339.455.455 0 0 1-.335.137.468.468 0 0 1-.471-.475c0-.132.045-.244.137-.335a.455.455 0 0 1 .334-.137zm-.42 5.946v-3.67h-.591V3.16h1.357v4.314z"/></svg>'},f11d:function(t,e,i){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0});var r,s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i("xZ9U"),l=i("0sbS"),c=i("N22A"),u=i("OekH"),d=i("8Wzo"),h=i("4qhP"),p=i("pIOw"),_=i("aIyQ"),f=(r=_)&&r.__esModule?r:{default:r},b=i("yB0V"),v=i("vFOx"),g=i("Sweg"),m=i("qahq");function y(t,e){
if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i("YFKU");var O=i("JOqt").debounce,S="Orders Page",T=function(){function t(e,i,n,r){C(this,t),this._source=e,this._totalCount=0,this._activeCount=0,this._orderUpdateDelegate=i,this._fullUpdateDelegate=n,this._possibleStatuses=r,this._statusCount=this._emptyStatuses(),this.countChanged=new f.default,this._recalcCountsDelayed=O(this._recalcCounts.bind(this),100)}return o(t,[{key:"_emptyStatuses",value:function(){var t={};return this._possibleStatuses.forEach((function(e){t[e]=0})),t}},{key:"start",value:function(){this._orderUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._recalcCounts()}},{key:"stop",value:function(){this._statusCount=this._emptyStatuses(),this._orderUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed)}},{key:"_recalcCounts",value:function(){var t=this,e=this._emptyStatuses();this._source().then((function(i){var n=0;i.forEach((function(t){e[t.status]++,t.status!==u.ORDERSTATUS.WORKING&&t.status!==u.ORDERSTATUS.INACTIVE||n++})),t._possibleStatuses.forEach((function(i){e[i]!==t._statusCount[i]&&(t._statusCount[i]=e[i],t.countChanged.fire(i,t._statusCount[i]))})),t._totalCount!==i.length&&(t._totalCount=i.length,t.countChanged.fire(0,t._totalCount)),t._activeCount!==n&&(t._activeCount=n,t.countChanged.fire(-1,t._activeCount))}))}}]),t}(),k=function(t){function e(t,i,n,r){C(this,e);var s=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,r));return s._filterStatus=null,s}return w(e,t),o(e,[{key:"setFilterStatus",value:function(t){this._filterStatus=t,this.isStarted()&&(this.stop(),this.start())}},{key:"filterStatus",value:function(){return this._filterStatus}},{key:"_satisfy",value:function(t){return!this._filterStatus||t.status===this._filterStatus}}]),e}(m.AbstractObjectsFilter),x=function(t){function e(t,i,n,r,s){C(this,e);var o=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,r));return o._functor=s,o}return w(e,t),o(e,[{key:"_satisfy",value:function(t){return this._functor(t)}}]),e}(m.AbstractObjectsFilter),D=function(){function t(e,i,n){C(this,t),this._source=e,this._rowUpdateDelegate=i,this._fullUpdateDelegate=n,this._orders=[],this.newStatusDelegate=new f.default}return o(t,[{key:"start",value:function(){var t=this;this._source().then((function(e){t._orders=e.slice(0),t._rowUpdateDelegate.subscribe(t,t._onRowUpdated),t._fullUpdateDelegate.subscribe(t,t._onFullUpdate)}))}},{
key:"stop",value:function(){this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._rowUpdateDelegate.unsubscribe(this,this._onRowUpdated),this._orders=[]}},{key:"_onFullUpdate",value:function(){this.stop(),this.start()}},{key:"_onRowUpdated",value:function(t){var e=this._orders.find((function(e){return e.id===t.id}));e&&e.status===t.status||(this.newStatusDelegate.fire(t),e?e.status=t.status:this._orders.push($.extend({},t)))}}]),t}(),j=function(t){function e(t,i,n,r){C(this,e);var s=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n));return s._filterStatusGetter=r,s}return w(e,t),o(e,[{key:"fullUpdate",value:function(){return this._fullUpdate()}},{key:"_onCreated",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onCreated",this).call(this),this.table().setRowActiveByFilter((function(e){return!t._filterStatusGetter()&&!(0,h.isOrderActive)(e.status)}))}},{key:"_update",value:function(t){return!!s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this,t)&&(this.table().setRowActiveById(t.id,!this._filterStatusGetter()&&!(0,h.isOrderActive)(t.status)),!0)}}]),e}(b.LinkingTableController),F=function(t){function e(t){C(this,e);var i=t.formatters||[],r=new x(t.source,t.subscriptions.rowUpdateDelegate,null,t.subscriptions.fullUpdateDelegate,t.filter),s=new T(r.filterSource.bind(r),r.filterObjectUpdateDelegate,r.filterFullUpdateDelegate,t.possibleOrderStatuses),o=new k(r.filterSource.bind(r),r.filterObjectUpdateDelegate,r.filterObjectDeleteDelegate,r.filterFullUpdateDelegate),u=t.subscriptions.fullUpdateDelegate;t.source=o.filterSource.bind(o),t.subscriptions.rowUpdateDelegate=o.filterObjectUpdateDelegate,t.subscriptions.rowDeleteDelegate=o.filterObjectDeleteDelegate,t.subscriptions.fullUpdateDelegate=o.filterFullUpdateDelegate;var _=$("<div>"),f=Object.assign({id:t.tableId,className:"orders",group:function(t){return+(0,h.isOrderActive)(t.status)},idProperty:"id"},t.tableOptions),b=new g.Table(_,t.columns,f,t.priceFormatterFn),v={id:t.id,name:t.title,headerCounter:t.headerCounter},m=new j(b,t.source,t.subscriptions,(function(){return w._ordersFilter.filterStatus()})),w=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_,v,[m]));w._ordersTable=m,w._globalFullUpdateDelegate=u,w._statusWatcher=new D(r.filterSource.bind(r),r.filterObjectUpdateDelegate,r.filterFullUpdateDelegate),w._orderPreFilter=r,w._ordersFilter=o,w._statusesCount=s,w._activeCount=0,w._highlightChanges=t.highlightChanges,w._possibleOrderStatuses=t.possibleOrderStatuses,w._columns=t.columns,w._pendingNewOrdersByStatuses={},w._closeFn=function(){return(0,c.tradingService)().trackEvent(S,"Cancel Order"),t.cancelFn.apply(t,arguments)},w._editFn=null!==t.modifyFn?function(){return(0,c.tradingService)().trackEvent(S,"Edit Order"),t.modifyFn.apply(t,arguments)}:null;var O={name:"orderSettings",format:function(e){var i=e.value;if((0,h.isOrderActive)(i.status)){var n=w._closeFn?function(){return w._closeFn(i.id)}:null,r=w._editFn&&function(e){
return e.stopType!==d.StopType.TrailingStop||t.configFlags.supportTrailingStop}(i)?function(){return w._editFn(i)}:null;return $((0,l.getSettingsButtons)(n,$.t("Cancel"),r,$.t("Modify Order..."),i.message))}return $((0,l.getSettingsButtons)())}};b.addFormatters(a.formatters.concat([O]).concat(i));var F=w._possibleOrderStatuses.map(w._translateStatus);return w._filter=$(n.render('\n\t\t<div class="tv-tabs tv-tabs--no-border tv-tabs--secondary-active tv-tabs--no-margin tv-tabs--semi-compact">\n\t\t\t{{#filter}}\n\t\t\t\t<div class="tv-tabs__tab {{id}}">\n\t\t\t\t\t<div class="tv-tabs__wrap">\n\t\t\t\t\t\t<div class="counter">\n\t\t\t\t\t\t\t<div class="counter__text">{{name}}</div>\n\t\t\t\t\t\t\t<div class="counter__count counter__count--{{id}}">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{{/filter}}\n\t\t</div>',{filter:[{id:"status-all",name:$.t("All")}].concat(F)})),w._filterTabs=new p.Tabs(w._filter.get(0),null,{noSlider:!0}),w._subscribeUpdates(),w}return w(e,t),o(e,[{key:"_subscribeUpdates",value:function(){this._ordersTable.start(),this._orderPreFilter.start(),this._ordersFilter.start(),this._statusesCount.start(),this._statusWatcher.start(),this._statusWatcher.newStatusDelegate.subscribe(this,this._onNewStatus),this._filterTabs.tabChanged.subscribe(this,this._onFilterChanged),this._statusesCount.countChanged.subscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.subscribe(this,this._onGlobalFullUpdate)}},{key:"_unsubscribeUpdates",value:function(){this._statusWatcher.newStatusDelegate.unsubscribe(this,this._onNewStatus),this._statusWatcher.stop(),this._ordersFilter.stop(),this._statusesCount.stop(),this._ordersTable.stop(),this._filterTabs.tabChanged.unsubscribe(this,this._onFilterChanged),this._statusesCount.countChanged.unsubscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.unsubscribe(this,this._onGlobalFullUpdate)}},{key:"destroy",value:function(){this._unsubscribeUpdates(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"_onGlobalFullUpdate",value:function(){this._pendingNewOrdersByStatuses={},this._updateFiltersActiveState()}},{key:"_count",value:function(){this._setCount(this._activeCount)}},{key:"_translateStatus",value:function(t){var e=(0,h.orderStatusToText)(t),i=e[0].toUpperCase()+e.slice(1);return{id:(0,h.orderStatusId)(t),name:i}}},{key:"contextItems",value:function(t){var e=this,i=[],n=this._ordersTable.table().rowIdAtEvent(t);if(!n)return i;var r=this._ordersTable.table().rowById(n);return null!==this._editFn&&i.push({text:$.t("Modify Order..."),enabled:(0,h.isOrderActive)(r.status),action:function(){return e._editFn(r)}}),i.push({text:$.t("Cancel Order"),enabled:(0,h.isOrderActive)(r.status),action:function(){return e._closeFn(n)}}),i}},{key:"_onFilterChanged",value:function(t){var e=this,i=0===t?null:this._possibleOrderStatuses[t-1];(0,c.tradingService)().trackEvent(S,"Order status filter",(0,h.orderStatusToText)(i)),this._ordersFilter.setFilterStatus(i),this._columns.filter((function(t){
return t.hasOwnProperty("supportedStatusFilters")})).forEach((function(t){e._ordersTable.table().setColumnAvailable(t.property,t.supportedStatusFilters.includes(null!==i?i:u.ORDERSTATUSFILTER.ALL))})),this._ordersTable.fullUpdate().then((function(){i&&e._pendingNewOrdersByStatuses[i]&&e._pendingNewOrdersByStatuses[i].forEach((function(t){return e._ordersTable.table().highlightRowById(t)})),e._removeActiveState()}))}},{key:"_onCountChanged",value:function(t,e){var i=this._filter.find(".counter .counter__count");if(0!==t){if(-1===t&&this._activeCount!==e)return this._activeCount=e,void this._count();var n=this._possibleOrderStatuses.indexOf(t);-1!==n&&$(i[n+1]).text(e)}else $(i[0]).text(e)}},{key:"_onNewStatus",value:function(t){var e=this;t.status!==u.ORDERSTATUS.PLACING&&(this._possibleOrderStatuses.forEach((function(i){if(e._pendingNewOrdersByStatuses[i]){var n=e._pendingNewOrdersByStatuses[i].indexOf(t.id);-1!==n&&e._pendingNewOrdersByStatuses[i].splice(n,1)}})),this._pendingNewOrdersByStatuses[t.status]||(this._pendingNewOrdersByStatuses[t.status]=[]),this._pendingNewOrdersByStatuses[t.status].push(t.id),setTimeout((function(){var i=e._ordersFilter.filterStatus(),n=!1;i&&i!==t.status||e._ordersTable.table().isRowInViewport(t.id)&&(e._ordersTable.table().highlightRowById(t.id),n=!0),n||e._pendingNewOrdersByStatuses[t.status]&&-1!==e._pendingNewOrdersByStatuses[t.status].indexOf(t.id)&&e._updateFiltersActiveState(),e._scheduleRemoveActiveState()}),0))}},{key:"_scheduleRemoveActiveState",value:function(){var t=this;this._activeStateRemovalScheduled||(this._activeStateRemovalScheduled=!0,setTimeout((function(){return t._removeActiveState()}),1e3))}},{key:"_removeActiveState",value:function(){this._activeStateRemovalScheduled=!1;var t=this._ordersFilter.filterStatus();t?this._pendingNewOrdersByStatuses[t]=[]:this._pendingNewOrdersByStatuses={},this._updateFiltersActiveState()}},{key:"_updateFiltersActiveState",value:function(){var t=this;this._highlightChanges&&this._possibleOrderStatuses.forEach((function(e){var i=t._pendingNewOrdersByStatuses[e]&&t._pendingNewOrdersByStatuses[e].length;t._filter.find("."+(0,h.orderStatusId)(e)+" .counter__count").toggleClass("i-active",!!i)}))}},{key:"topline",value:function(){return this._filter}},{key:"filter",get:function(){return this._filter}}]),e}(v.TablePage);e.default=F,t.exports=e.default}).call(this,i("nbsC"))},hZEc:function(t,e,i){"use strict";function n(t,e){var i=e.parentNode;if(i){var n=e.nextSibling;n?i.insertBefore(t,n):i.appendChild(t)}}function r(t){var e=function t(e){if(3===e.nodeType&&e.data.trim())return e;if(e.childNodes)for(var i=e.childNodes.length;i--;){var n=t(e.childNodes[i]);if(n)return n}return null}(t);if(e){var i=e.data;if(e.parentNode&&e.parentNode.tagName&&"sup"===e.parentNode.tagName.toLowerCase())return;var r=/^([^]*)(\S)(\s*)$/.exec(i);if(r){e.data=r[1];var s=document.createElement("sup");s.textContent=r[2],n(s,e),r[3]&&n(document.createTextNode(r[3]),s)}}}i.d(e,"a",(function(){return r}))},j6HJ:function(t,e,i){t.exports={title:"title-1LZMUbRw",
elem:"elem-2ITxwjJf",label:"label-1XMRKC9l"}},l6K7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AccountManager=void 0;var n=k(i("14Xm")),r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(l){r=!0,s=l}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i("PGTi");var o=i("pIOw"),a=i("5VQP"),l=i("PT1i"),c=T(i("Kxc7")),u=k(i("i8i4")),d=k(i("q1tI")),h=i("LoC4"),p=i("T7KF"),_=k(i("f11d")),f=i("UpRv"),b=k(i("0dtH")),v=i("bR4N"),g=i("4qhP"),m=i("Un+5"),y=i("OekH"),w=i("EgWA"),C=i("N22A"),O=i("6f6E"),S=i("Eyy1");i("8wgr"),T(i("Vdly"));function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}function x(t){return function(){var e=t.apply(this,arguments);return new Promise((function(t,i){return function n(r,s){try{var o=e[r](s),a=o.value}catch(l){return void i(l)}if(!o.done)return Promise.resolve(a).then((function(t){n("next",t)}),(function(t){n("throw",t)}));t(a)}("next")}))}}$.t("Username or password is incorrect");var D=[y.ORDERSTATUS.WORKING,y.ORDERSTATUS.INACTIVE,y.ORDERSTATUS.FILLED,y.ORDERSTATUS.CANCELED,y.ORDERSTATUS.REJECTED],j=[y.ORDERSTATUS.FILLED,y.ORDERSTATUS.CANCELED,y.ORDERSTATUS.REJECTED],F=function(t){t.accId,t.brokerName;var e=t.tabsCount,n=void 0===e?0:e;return'\n<div class="tv-account-manager">\n\t<div class="tv-account-manager__top-panel">\n\t\t<div class="tv-tabs tv-tabs--semi-compact tv-tabs--no-margin tv-tabs--no-border">\n\t\t\t'+R(n)('<div class="tv-tabs__tab js-tab"></div>')+'\n\t\t</div>\n\t\t<div class="controls">\n\t\t\t<div class="broker-selector">\n\t\t\t</div>\n\t\t\t<div class="account-selector js-account-dropdown">\n\t\t\t</div>\n\t\t\t<div class="controls__elem option js-tab-options">\n\t\t\t\t<div class="controls__elem--icon-wrapper">\n\t\t\t\t\t<div class="controls__elem--icon">'+i("Xxuz")+'</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="tv-account-manager__secondary-panel js-cesondary-panel">\n\t\t<div class="js-secondary-tabs"></div>\n\t\t<div class="tv-account-manager__summary js-summary"></div>\n\t</div>\n\t<div class="tv-account-manager__content js-content js-table-container">\n\t\t'+R(n)('<div class="tv-account-manager__page js-page"></div>')+"\n\t</div>\n</div>"},R=function(t){return function(e){return Array(t).fill(e).join("")}};function U(t,e){if(void 0===e)return{};var i=function(t,e){var i=t.findIndex((function(t){return t.id===e}))
;return-1===i&&(i=t.findIndex((function(t){return t.property===e}))),i}(t,e.columnId);return-1!==i?{idx:i,asc:e.asc||!1}:{}}var P=window.t("Show Buy/Sell Buttons");e.AccountManager=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._adapter=e,this._bridge=i,this._container=i.$body,this._pages=[],this._topLines={},this._trading=(0,C.tradingService)(),this._updateAccountIdBinded=this._updateAccountId.bind(this),this._create(),this._fullupdate()}var e,T,k;return s(t,[{key:"priceFormatter",value:function(t){return t.symbol?this._trading.formatter(t.symbol):Promise.resolve(null)}},{key:"_updateAccountId",value:(k=x(n.default.mark((function t(){var e;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._adapter.accountMetainfo();case 2:e=t.sent,this._accName.text(e.name);case 4:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)})},{key:"_create",value:(T=x(n.default.mark((function t(){var e,i,r,s,a,l,c,h,p,_,f,b,g,y,w=this;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._pages=this.pages.map((function(t){return new t.constructor(t.ctorArgument)})),this._info=this._adapter.accountManagerInfo(),this._accountId=this._adapter.currentAccount(),t.next=5,this._adapter.accountsMetainfo();case 5:e=t.sent,i=this._info.accountTitle,r=this._pages.length,this._container.append($(F({tabsCount:r,brokerName:i,accId:""}))),s=this._container.find(".js-tab-options"),(0,v.bindPopupMenu)(s,this._adapter.buttonDropdownActions.bind(this._adapter),{reverse:!0}),a=this._container.find(".js-broker-dropdown"),this._accName=this._container.find(".js-account-name"),this._accountSummaryRow&&this._accountSummaryRow.destroy(),this._info.summary&&(l=this._container.find(".js-summary"),this._accountSummaryRow=new O.AccountSummaryRow(l[0],this._info.summary)),this._adapter.currentAccountUpdate.subscribe(this,this._updateAccountIdBinded,!0),this._trading.brokersList().filter((function(t){return!t.configFlags.isSuspended})),a.addClass("js-hidden"),e.length&&(c=void 0,h=e.map((function(t){var e,i=t.name.length>14?t.name.slice(0,14)+"…":t.name,r=(e=x(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.id!==w._adapter.currentAccount()&&w._adapter.setCurrentAccount(t.id);case 1:case"end":return e.stop()}}),e,w)}))),function(){return e.apply(this,arguments)});return t.id===w._adapter.currentAccount()&&(c=t.name),{id:t.id,title:i,name:t.name,callBack:r,currency:void 0!==t.currency?t.currency:"USD"}})),u.default.render(d.default.createElement(m.AccountDropdown,{account:c,accountsList:h,className:"pair apply-common-tooltip",currentAccountUpdate:this._adapter.currentAccountUpdate}),document.querySelector(".account-selector"))),p=this._container.find(".js-page"),_=this._container.find(".js-tab"),this._pages.forEach((function(t,e){p.eq(e).html(t.content()),_.eq(e).html(t.header())})),f=this._container.find(".js-content"),
(this.tabs=new o.Tabs(this._container.find(".tv-tabs").get(0),f.get(0))).tabChanged.subscribe(this,this._onPageChanged),this.unbindContexMenu(),this._dispatch=this.bindContextMenu(),this._dispatchHeightHandler&&(this._dispatchHeightHandler(),delete this._dispatchHeightHandler),b=function(){w._pages.forEach((function(t){return t.updateVisibleContent()}))},f.on("scroll",b),g=function(t){f.css("height",t-86+"px"),b()},this._bridge.height.subscribe(g,{callWithLast:!0}),this._dispatchHeightHandler=function(){return w._bridge.height.unsubscribe(g)},y=function(t){t?w._updatePagesActiveStatuses():w._pages.forEach((function(t){return t.setActive(!1)}))},this._bridge.visible.subscribe(y,{callWithLast:!0}),this._dispatchVisibilityHandler=function(){return w._bridge.visible.unsubscribe(y)},this._attachFilter();case 37:case"end":return t.stop()}}),t,this)}))),function(){return T.apply(this,arguments)})},{key:"_onPageChanged",value:function(t){this._attachFilter(),this._trading.trackEvent("Bottom Panel","Select "+this._pages[t].id()+" page"),this._updatePagesActiveStatuses()}},{key:"_updatePagesActiveStatuses",value:function(){for(var t=this._adapter.connectionStatus()===y.CONNECTSTATUSES.CONNECTED,e=this.tabs.index(),i=0;i<this._pages.length;i++)this._pages[i].setActive(e===i&&t)}},{key:"_detachFilter",value:function(){this._container.find(".js-secondary-tabs").children().addClass("js-hidden")}},{key:"_attachFilter",value:function(){if(this._detachFilter(),this._topLines[this._currentPageIndex()])this._topLines[this._currentPageIndex()].removeClass("js-hidden");else if(this._currentPage().topline()){var t=this._currentPage().topline(),e=this._container.find(".js-secondary-tabs");t.appendTo(e),this._topLines[this._currentPageIndex()]=t}}},{key:"_fullupdate",value:function(){this._pages.forEach((function(t){return t.reset()}))}},{key:"_unsubscribe",value:function(){this._adapter.currentAccountUpdate.unsubscribe(this,this._updateAccountIdBinded),this.tabs&&(this.tabs.tabChanged.unsubscribe(this,this._onPageChanged),this.tabs.stop()),this._dispatchHeightHandler&&(this._dispatchHeightHandler(),delete this._dispatchHeightHandler),this._dispatchVisibilityHandler&&(this._dispatchVisibilityHandler(),delete this._dispatchVisibilityHandler),this._container.find(".js-secondary-tabs").empty(),this._topLines={}}},{key:"remove",value:function(){var t=document.querySelector(".account-selector");null!==t&&u.default.unmountComponentAtNode(t);var e=document.querySelector(".broker-selector");null!==e&&u.default.unmountComponentAtNode(e),this._adapter.connectionStatusUpdate.unsubscribe(this,this._onStatusChange),this._unsubscribe(),this._pages.forEach((function(t){return t.destroy()})),this.unbindContexMenu(),this._container.empty()}},{key:"bindContextMenu",value:function(){var t=this,e=function(e){e.preventDefault(),t._contextItems(e).then((function(t){c.enabled("property_pages")||(t=t.slice(0,-1)),a.ContextMenuManager.createMenu((0,g.convertActionDescriptionsToActions)(t)).then((function(t){t.show(e)}))}))}
;return this._container.on("contextmenu",e),this._container.off.bind(this._container,"contextmenu",e)}},{key:"unbindContexMenu",value:function(){this._dispatch&&(this._dispatch(),delete this._dispatch)}},{key:"_getCurrentPrice",value:function(t){return this._trading.realtimeProvider().quotesSnapshot(t).then((function(t){var e=t.bid;return(t.ask+e)/2}))}},{key:"_currentPageIndex",value:function(){return this.tabs.index()}},{key:"_currentPage",value:function(){return this._pages[this._currentPageIndex()]}},{key:"_contextItems",value:(e=x(n.default.mark((function t(e){var s,o,a,u,d,h,p,_,f,b,v=this;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="Bottom Panel Context Menu",o=l.linking.proSymbol.value(),t.next=4,Promise.all([this._getCurrentPrice(o),this._trading.suggestedQty().value(o)]);case 4:if(a=t.sent,u=r(a,2),d=u[0],h=u[1],p=this._currentPage().contextItems(e),!this._info||!this._info.contextMenuActions){t.next=11;break}return t.abrupt("return",this._info.contextMenuActions(e,p));case 11:return _={separator:!0},p.length&&p.push(_),f=[{text:$.t("Create New Order..."),action:function(){v._trading.trackEvent(s,"New Order"),(0,S.ensureNotNull)(v._trading.brokerCommandsUI()).placeOrder({symbol:o,price:d,qty:h})}}],c.enabled("buy_sell_buttons")&&(b={text:P,checkable:!0,checked:this._trading.showSellBuyButtons.value(),action:function(){var t=!v._trading.showSellBuyButtons.value();v._trading.trackEvent(s,"Show Sell/Buy Buttons",t?"Check":"Uncheck"),v._trading.showSellBuyButtons.setValue(t)}},f.push(_,b)),c.enabled("property_pages")&&f.push(_,{text:$.t("Trading Settings..."),icon:i("MXV9"),action:function(){v._trading.trackEvent(s,"Trading Properties"),v._trading.showTradingProperties()}}),t.abrupt("return",p.concat(f));case 17:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"_showTooltipOverSelectBrokerButton",value:function(){}},{key:"pages",get:function(){var t=this,e=this._adapter.metainfo().id,i=this._adapter.accountManagerInfo(),n=this._adapter.metainfo().configFlags,r=(0,S.ensureNotNull)(this._trading.brokerCommandsUI()),s=[];n.supportPositions&&s.push({constructor:f.PositionPage,ctorArgument:{brokerId:e,formatters:i.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),checkSupportTrades:function(){return n.supportTrades},positions:{source:function(){return t._adapter.positions().then((function(t){return t.filter((function(t){return(0,g.isPositionActive)(t)}))}))},closeFn:r.closePosition.bind(r),editFn:n.supportPositionBrackets?r.editPositionBrackets.bind(r):null,reverseFn:n.supportReversePosition?r.reversePosition.bind(r):null,columns:i.positionColumns,subscriptions:{rowUpdateDelegate:new b.default([this._adapter.positionPartialUpdate,this._adapter.positionUpdate]),countUpdateDelegate:this._adapter.positionUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}},trades:n.supportTrades?{source:function(){return t._adapter.trades().then((function(t){return t.filter((function(t){return 0!==t.qty}))}))},
closeFn:n.supportCloseTrade?r.closeTrade.bind(r):null,editFn:n.supportTradeBrackets?r.editTradeBrackets.bind(r):null,reverseFn:null,columns:i.tradeColumns||i.positionColumns,subscriptions:{rowUpdateDelegate:new b.default([this._adapter.tradePartialUpdate,this._adapter.tradeUpdate]),countUpdateDelegate:this._adapter.tradeUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}}:null,fullUpdateDelegate:this._adapter.currentAccountUpdate}});var o=this._adapter.orders.bind(this._adapter);s.push({constructor:_.default,ctorArgument:{id:"Orders",title:$.t("Orders"),source:o,cancelFn:r.cancelOrder.bind(r),modifyFn:this._adapter.metainfo().configFlags.supportModifyOrder?r.modifyOrder.bind(r):null,columns:i.orderColumns,headerCounter:!0,tableId:e+".orders",formatters:i.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.currentAccountUpdate,rowUpdateDelegate:new b.default([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},possibleOrderStatuses:D.filter((function(t){return!i.possibleOrderStatuses||-1!==i.possibleOrderStatuses.indexOf(t)})),filter:function(){return!0},highlightChanges:!0,tableOptions:U(i.orderColumns,i.orderColumnsSorting),configFlags:this._adapter.metainfo().configFlags}});var a=this._adapter.ordersHistory.bind(this._adapter);if(this._adapter.metainfo().configFlags.supportOrdersHistory){var l={constructor:_.default,ctorArgument:{id:"History",title:$.t("History"),source:function(){return Promise.all([o(),a()]).then((function(t){var e;return(e=[]).concat.apply(e,function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(t))}))},cancelFn:r.cancelOrder.bind(r),modifyFn:r.modifyOrder.bind(r),columns:i.historyColumns,headerCounter:!1,tableId:e+".history",formatters:i.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.currentAccountUpdate,rowUpdateDelegate:new b.default([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},possibleOrderStatuses:j.filter((function(t){return!i.possibleOrderStatuses||-1!==i.possibleOrderStatuses.indexOf(t)})),filter:function(t){return-1===[y.ORDERSTATUS.INACTIVE,y.ORDERSTATUS.PLACING,y.ORDERSTATUS.WORKING].indexOf(t.status)},highlightChanges:!1,tableOptions:U(i.historyColumns,i.historyColumnsSorting)}};s.push(l)}return i.pages&&i.pages.forEach((function(n){var r=n.tables.map((function(r){return{title:r.title||"",columns:r.columns,source:(0,g.wrapDeferredWithPromise)(r.getData),options:Object.assign({id:e+"."+n.id+"."+r.id,className:"balances",idProperty:"id"},U(r.columns,r.initialSorting)),formatters:i.customFormatters||[],priceFormatterFn:t.priceFormatter.bind(t),subscriptions:{fullUpdateDelegate:t._adapter.currentAccountUpdate,rowUpdateDelegate:r.changeDelegate},flags:r.flags}}));s.push({constructor:p.TitledTablesPage,ctorArgument:{id:n.id,title:n.title,tables:r}})})),
c.enabled("show_trading_notifications_history")&&s.push({constructor:h.SingleTablePage,ctorArgument:{id:"notifications_log",title:$.t("Notifications log"),source:function(){return Promise.resolve(t._trading.getNotifications())},columns:w.notificationColumns,formatters:[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._trading.onNotificationsChanged,rowUpdateDelegate:this._trading.onNewNotification}}}),s}}]),t}()},lt86:function(t,e,i){"use strict";var n=i("rp+F"),r={createLabel:function(t,e,i){return n.create("label",$.extend(i,{html:e,for:t}))},unbindContextMenu:function(t){t.contextMenu((function(t){return!1}))},offsetX:function(t,e){return t.width()+e.pageX},offsetY:function(t,e){return t.height()+e.pageY},isElementInViewport:function(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},isVisible:function(t,e,i){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);e||(e=1),i||(i=1);for(var n=t.getBoundingClientRect(),r=[];t.parentElement;)r.push(t.parentElement.getBoundingClientRect()),t=t.parentElement;return r.every((function(t){var r=Math.min(n.right,t.right)-Math.max(n.left,t.left),s=Math.min(n.bottom,t.bottom)-Math.max(n.top,t.top),o=r/n.width*100,a=s/n.height*100;return o+.01>e&&a+.01>i}))},checkObjIsOutOfWindowX:function(t,e){var i=$(window).width()-r.offsetX(t,e);if(i<0){var n=e.pageX+i;return n>0?n:0}return e.pageX},checkObjIsOutOfWindowY:function(t,e){var i=$(window).height()-r.offsetY(t,e);if(i<0){var n=e.pageY+i;return n>0?n:0}return e.pageY},checkObjIsOutOfWindow:function(t,e){return{left:r.checkObjIsOutOfWindowX(t,e),top:r.checkObjIsOutOfWindowY(t,e)}},setAttr:function(t,e,i){return t.attr?t.attr(e,i):t[e]=i,t},removeAttr:function(t,e){return t.removeAttr?t.removeAttr(e):t.removeAttribute(e),t},notNull:function(t){return-1===$.inArray(t,[null,void 0,"false","null","undefined",0])},hideControl:function(t){return t.css({position:"absolute",top:-1e3,left:-1e3})}};t.exports=r},qahq:function(t,e,i){"use strict";i.r(e),i.d(e,"AbstractObjectsFilter",(function(){return s}));var n=i("aIyQ"),r=i.n(n),s=function(){function t(t,e,i,n){this.filterFullUpdateDelegate=new r.a,this.filterObjectUpdateDelegate=new r.a,this.filterObjectDeleteDelegate=new r.a,this._filteredObjects=[],this._requestsCount=0,this._started=!1,this._objectsRequest=null,this._source=t,this._objectUpdateDelegate=e,this._objectDeleteDelegate=i,this._fullUpdateDelegate=n}return t.prototype.start=function(){var t=this;this._requestsCount++;var e=this._source,i=this._objectsRequest||Promise.resolve([]);this._objectsRequest=i.then((function(){return e()})).then((function(e){var i=e.filter((function(e){return t._satisfy(e)}));return t._requestsCount--,t._requestsCount||(t.stop(),t._filteredObjects=i,t._objectsRequest=null,t._objectUpdateDelegate.subscribe(t,t._onObjectUpdated),
t._objectDeleteDelegate&&t._objectDeleteDelegate.subscribe(t,t._onObjectDeleted),t._fullUpdateDelegate.subscribe(t,t._onFullUpdate),t._started=!0),i.slice(0)}))},t.prototype.stop=function(){this._objectUpdateDelegate.unsubscribe(this,this._onObjectUpdated),this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._objectDeleteDelegate&&this._objectDeleteDelegate.unsubscribe(this,this._onObjectDeleted),this._filteredObjects=[],this._started=!1},t.prototype.isStarted=function(){return this._started},t.prototype.filterSource=function(){return this._objectsRequest?this._objectsRequest:Promise.resolve(this._filteredObjects.slice(0))},t.prototype._satisfy=function(t){throw new Error("should be implemented")},t.prototype._onFullUpdate=function(){this.stop(),this.start(),this.filterFullUpdateDelegate.fire()},t.prototype._onObjectDeleted=function(t){var e=this._filteredObjects.find((function(e){return e.id===t}));e&&this.filterObjectDeleteDelegate.fire(e.id)},t.prototype._onObjectUpdated=function(t){var e=this._filteredObjects.find((function(e){return e.id===t.id})),i=e?this._filteredObjects.indexOf(e):-1;this._satisfy(t)?(e?this._filteredObjects[i]=t:this._filteredObjects.push(t),this.filterObjectUpdateDelegate.fire(t)):e&&(this.filterObjectDeleteDelegate.fire(e.id),this._filteredObjects.splice(i,1))},t}()},"rp+F":function(t,e,i){"use strict";var n={renderAttributes:function(t){var e="";for(var i in t)t[i]&&(e+=" "+i+'="'+t[i]+'"');return e},create:function(t,e){var i=$(document.createElement(t));return e&&(e.html&&(i.html(e.html),delete e.html),i.attr(e)),i},validAttributes:["abbr","accept-charset","accept","accesskey","action","align","alink","alt","archive","axis","background","bgcolor","border","cellpadding","cellspacing","char","charoff","charset","checked","cite","class","classid","clear","code","codebase","codetype","color","cols","colspan","compact","content","coords","data","datetime","declare","defer","dir","disabled","enctype","face","for","frame","frameborder","headers","height","href","hreflang","hspace","http-equiv","id","ismap","label","lang","language","link","longdesc","marginheight","marginwidth","maxlength","media","method","multiple","name","nohref","noresize","noshade","nowrap","object","onblur","onchange","onclick","ondblclick","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onreset","onselect","onsubmit","onunload","profile","prompt","readonly","rel","rev","rows","rowspan","rules","scheme","scope","scrolling","selected","shape","size","span","src","standby","start","style","summary","tabindex","target","text","title","type","usemap","valign","value","valuetype","version","vlink","vspace","width"],validAttribute:function(t){return-1!==jQuery.inArray(t,n.validAttributes)},cleanAttributes:function(t){return jQuery.each(t,(function(e,i){n.validAttribute(e)||delete t[e]})),t}};t.exports=n},v9OY:function(t,e,i){},vFOx:function(t,e,i){"use strict";i.r(e);var n=i("mrSG"),r=function(){function t(t,e){this._active=!1,
this._$content=t,this._id=e.id,this._name=e.name;var i=e.headerCounter?'<div class="counter"><div class="counter__text">'+e.name+'</div><div class="counter__count">0</div></div>':"<span>"+e.name+"</span>";this._$header=$(i),this._countElement=this._$header.find(".counter__count")[0]}return t.prototype.setActive=function(t){this._active!==t&&(this._active=t,this._onActiveChanged(t))},t.prototype.isActive=function(){return this._active},t.prototype.reset=function(){},t.prototype.destroy=function(){},t.prototype.updateVisibleContent=function(){},t.prototype.header=function(){return this._$header},t.prototype.content=function(){return this._$content},t.prototype.name=function(){return this._name},t.prototype.id=function(){return this._id||this._name},t.prototype.contextItems=function(t){return[]},t.prototype.topline=function(){return null},t.prototype._setCount=function(t){this._countElement&&(this._countElement.innerHTML=String(t))},t.prototype._onActiveChanged=function(t){},t}();i.d(e,"TablePage",(function(){return s}));var s=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r._tableControllers=n,r}return Object(n.__extends)(e,t),e.prototype.reset=function(){this._tableControllers.forEach((function(t){return t.reset()})),t.prototype.reset.call(this)},e.prototype.destroy=function(){this._tableControllers.forEach((function(t){return t.destroy()})),t.prototype.destroy.call(this)},e.prototype.updateVisibleContent=function(){this._tableControllers.forEach((function(t){return t.table().updateVisibleContent()})),t.prototype.updateVisibleContent.call(this)},e.prototype._onActiveChanged=function(t){this._tableControllers.forEach((function(e){return e.setActive(t)}))},e}(r)},wmOI:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LEFT_ARROW=37,e.UP_ARROW=38,e.RIGHT_ARROW=39,e.DOWN_ARROW=40,e.ENTER=13,e.ESC=27,e.SPACE=32,e.SLASH=47},xZ9U:function(t,e,i){"use strict";i.r(e);i("P5fv");var n,r=i("9XXR"),s=i("PT1i"),o=i("MbIA"),a=i("4kQX"),l=i("gQ5K"),c=function(){function t(){this._dateFormatter=new l.DateFormatter,this._timeFormatter=new a.TimeFormatter}return t.prototype.format=function(t){var e=new Date(t.dateOrDateTime),i=this._dateFormatter.format(e);return t.hasTime&&(i+=" "+this._timeFormatter.format(e)),i},t.prototype.formatLocal=function(t){var e=new Date(t.dateOrDateTime),i=this._dateFormatter.formatLocal(e);return t.hasTime&&(i+=" "+this._timeFormatter.formatLocal(e)),i},t}(),u=i("9uLv");!function(t){function e(t,e){return 0===t?e&&void 0!==e.neutral?e.neutral:u.color.black70:t>0?e&&void 0!==e.up?e.up:u.color.success:e&&void 0!==e.down?e.down:u.color.danger}t.formatSign=e,t.formatDiff=function(t,i){return e(i-t)},t.domDifference=function(t,e,i,n,r){function s(t){var e=document.createElement("span");return e.innerHTML=t,e}if(void 0===i&&(i=0),void 0===n&&(n=""),void 0===r&&(r=""),!i)return $(s(t));var o=t+"",a=e+"",l=null;if(o.length===a.length){for(var c=0;c<o.length;c++)if(o.charAt(c)!==a.charAt(c)){l=c;break}}else l=Number("0");if(null===l)return $(s(o))
;var u=s(o.substr(0,l)),d=document.createElement("span");return d.className=i<0?n:r,d.appendChild(s(o.substr(l))),$(u).add(d)}}(n||(n={}));var d=i("4qhP"),h=i("ogJP"),p=i("GH0z"),_=i("hZEc");$.fn.lastCharSup=function(){for(var t=0;t<this.size();t++)Object(_.a)(this.get(t));return this};var f,b=i("Ialn"),v=i("qjxE"),g=i("ivNn");i.d(e,"formatters",(function(){return T})),i.d(e,"tableFormatterByName",(function(){return k}));var m=new o.DateTimeFormatter,y=new c,w=new p.PercentageFormatter;function C(t,e,i,s){var o={textPrevPrice:i?Object(r.splitThousands)(t.format(i)):"",textPrice:e?Object(r.splitThousands)(t.format(e)):""};return!Object(h.isNumber)(i)&&s&&(i=e),Object(h.isNumber)(e)&&Object(h.isNumber)(i)&&(o.elem=n.domDifference(o.textPrice,o.textPrevPrice,e-i,"tv-data-table__red-text","tv-data-table__green-text")),o}var O=((f={})[3]="tv-data-table__grey-text",f[6]="tv-data-table__blue-text",f[5]="tv-data-table__red-text",f[2]="tv-data-table__green-text",f[1]="tv-data-table__red-green-text",f[4]=void 0,f),S={name:"default",format:function(t){return t.value+""}},T=[{name:"symbol",format:function(t){var e=t.value,i=t.row,n=t.$container;return""!==i.symbol&&n.on("click",(function(){return s.linking.symbol.setValue(i.symbol)})),e}},{name:"side",format:function(t){var e=t.value,i=t.$container,n=Object(d.sideToText)(e);return 1===e?i.addClass("tv-data-table__blue-text"):i.addClass("tv-data-table__light-red-text"),n}},{name:"type",format:function(t){var e=t.value;return Object(d.orderTypeToText)(e)}},{name:"formatPrice",format:function(t){var e=t.value,i=C(t.priceFormatter,e,t.prevValue);return i.elem||Object(b.forceLTRStr)(i.textPrice)}},{name:"formatPriceForexSup",format:function(t){var e=t.value,i=t.priceFormatter,n=t.prevValue,r=i.hasForexAdditionalPrecision(),s=C(i,e,n,r);return e&&s.elem&&r&&s.elem.last().lastCharSup(),s.elem||Object(b.forceLTRStr)(s.textPrice)}},{name:"status",format:function(t){var e=t.value,i=t.$container,n=Object(d.orderStatusToText)(e),r=O[e];return r&&i.addClass(r),n}},{name:"date",format:function(t){var e=t.value;return e?m.format(new Date(e)):""}},{name:"localDate",format:function(t){var e=t.value;return e?m.formatLocal(new Date(e)):""}},{name:"dateOrDateTime",format:function(t){var e=t.value;return e?y.format(e):""}},{name:"localDateOrDateTime",format:function(t){var e=t.value;return e?y.formatLocal(e):""}},{name:"unixTimeAgo",format:function(t){var e=t.value,i=$(document.createElement("span"));return Object(v.jQueryCompatibleAgoDateFormatter)(i,new Date(1e3*e)),i}},{name:"fixed",format:function(t){var e=t.value;return isNaN(e)?"":Object(b.forceLTRStr)(Math.abs(e||0)<.001?"0.00":Object(r.splitThousands)((e||0).toFixed(2)))}},{name:"variablePrecision",format:function(t){var e=t.value;return isNaN(e)?"":Object(b.forceLTRStr)(String(Object(g.fixComputationError)(e)))}},{name:"pips",format:function(t){var e=t.value;return Object(b.forceLTRStr)(Object(h.isNumber)(e)?Math.abs(e)<.01?"0.0":Object(r.splitThousands)(e.toFixed(1)):"")}},{name:"integerSeparated",format:function(t){var e=t.value
;return Object(b.forceLTRStr)(Object(h.isNumber)(e)?Object(r.splitThousands)(e.toFixed(0)):"")}},{name:"formatQuantity",format:function(t){var e=t.value;return Object(b.forceLTRStr)(Object(h.isNumber)(e)?Object(r.splitThousands)(e):"")}},{name:"profit",format:function(t){var e=t.value,i=t.$container;if(Object(h.isNumber)(e)){var n=e&&Math.round(100*e)/100,s=n>0?"+":"",o=n<0?"tv-data-table__red-text":n>0?"tv-data-table__green-text":"";return i.addClass(o),Object(b.forceLTRStr)(s+Object(r.splitThousands)((n||0).toFixed(2)))}return""}},{name:"percentage",format:function(t){var e=t.value;return Object(b.forceLTRStr)(Object(h.isNumber)(e)?w.format(e):"")}},{name:"marginPercent",format:function(t){var e=t.value;return isFinite(e)?e<.01?e+"%":w.format(e):"> 200%"}}];function k(t,e){void 0===e&&(e=S);for(var i=0,n=T;i<n.length;i++){var r=n[i];if(r.name===t)return r}return e}},yB0V:function(t,e,i){"use strict";i.r(e),i.d(e,"LinkingTableController",(function(){return s}));var n=i("mrSG"),r=i("PT1i"),s=function(t){function e(e,i,n){var s=t.call(this,e,i,n)||this;return s._onLinkingBound=s._onLinking.bind(s),r.linking.proSymbol.subscribe(s._onLinkingBound),s}return Object(n.__extends)(e,t),e.prototype.destroy=function(){r.linking.proSymbol.unsubscribe(this._onLinkingBound),t.prototype.destroy.call(this)},e.prototype._update=function(e){if(!t.prototype._update.call(this,e))return!1;var i=r.linking.proSymbol.value();return this.table().setRowLinkedById(e.id,i===e.symbol),!0},e.prototype._onCreated=function(){this.table().setRowLinkedByFilter((function(t){return t.symbol===r.linking.proSymbol.value()}))},e.prototype._onLinking=function(t){this.table().setRowLinkedByFilter((function(e){return e.symbol===t}))},e}(i("OKnH").a)}}]);